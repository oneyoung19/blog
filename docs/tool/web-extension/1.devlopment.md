---
title: 1.å¼€å‘
---

æœ¬èŠ‚ä»‹ç»ä¸€ä¸‹ä»é›¶åˆ°ä¸€åˆ›å»ºä¸€ä¸ª `Chrome Extension`ã€‚

å®˜æ–¹æ–‡æ¡£ï¼š[æ‰‹æŠŠæ‰‹åˆ›å»ºä¸€ä¸ªChrome Extension](https://developer.chrome.com/docs/extensions/get-started/tutorial/hello-world)

My suck source code: [learn-web-extensions](https://github.com/oneyoung19/learn-web-extensions)

## 1.1 manifest.json

`manifest.json` æ–‡ä»¶å®é™…ä¸Šæ˜¯ **chrome æ‰©å±•çš„é…ç½®æ¸…å•**ï¼Œå®ƒå®šä¹‰äº†çš„æ‰©å±•ç¨‹åºçš„å…ƒæ•°æ®ï¼ˆæ¯”å¦‚åç§°ã€ç‰ˆæœ¬ï¼‰å’Œä¸»è¦åŠŸèƒ½ï¼ˆæ¯”å¦‚ content scriptã€background service workerã€actionã€commands ç­‰ï¼‰ã€‚

```json
{
  "name": "Hello Extensions of the world!",
  "description": "Base Level Extension",
  "version": "1.0",
  "manifest_version": 3,
  "action": {
    // "default_popup": "src/hello.html", // ä¸chrome.action.onClicked.addListenerå†²çª
    "default_icon": "src/assets/images/icon.png"
  },
  "icons": {
    "16": "src/assets/images/icon-16.png",
    "32": "src/assets/images/icon-32.png",
    "48": "src/assets/images/icon-48.png",
    "128": "src/assets/images/icon-128.png"
  },
  "content_scripts": [
    {
      "js": ["src/scripts/content.js"],
      "matches": [
        "https://developer.chrome.com/docs/extensions/*",
        "https://developer.chrome.com/docs/webstore/*",
        "https://developer.chrome.com/docs/extensions/reference/*"
      ]
    }
  ],
  "background": {
    // "service_worker": "src/scripts/background.js",
    "service_worker": "src/scripts/service-worker.js",
    "type": "module"
  },
  "permissions": ["activeTab", "scripting", "storage", "alarms"],
  "host_permissions": ["https://chrome.dev/f/*"],
  "commands": {
    "_execute_action": {
      "suggested_key": {
        "default": "Ctrl+B",
        "mac": "Command+B"
      }
    }
  },
  "minimum_chrome_version": "102",
  "omnibox": {
    "keyword": "api"
  }
}
```

## 1.2 å­—æ®µè¯¦è§£

---

### 1.2.1 `name`

```json
"name": "Hello Extensions of the world!"
```

âœ… **ä½œç”¨:**
æ‰©å±•åœ¨ `chrome://extensions`é¡µé¢å’Œæµè§ˆå™¨èœå•ä¸­å±•ç¤ºæ—¶æ‰€ä½¿ç”¨çš„åç§°ã€‚

---

### 1.2.2 `description`

```json
"description": "Base Level Extension"
```

âœ… **ä½œç”¨:**
å¯¹æ‰©å±•è¿›è¡Œç®€è¦åœ°åŠŸèƒ½å’Œç”¨é€”è¯´æ˜ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£ä½ çš„æ‰©å±•ã€‚

---

### 1.2.3 `version`

```json
"version": "1.0"
```

âœ… **ä½œç”¨:**
æ‰©å±•çš„ç‰ˆæœ¬å·ï¼Œæ¨èä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆ SemVer ï¼Œå¦‚ `1.0.0`ï¼‰ï¼Œéšç€æ‰©å±•åŠŸèƒ½çš„æ¨è¿›å¯ä»¥è¿›è¡Œå¢é‡ã€‚

---

### 1.2.4 `manifest_version`

```json
"manifest_version": 3
```

âœ… **ä½œç”¨:**
æŒ‡å®š manifest æ–‡ä»¶æ‰€é€‚ç”¨çš„ç‰ˆæœ¬ï¼Œ**æ–°ç‰ˆæ‰©å±•å‡éœ€è¦è®¾ç½®ä¸º 3**ï¼Œå®ƒå¯¹æ•´ä½“ç»“æ„å’ŒAPIæœ‰é‡å¤§è°ƒæ•´ï¼ˆåŒ…æ‹¬ service worker å–ä»£ background page ç­‰ï¼‰ã€‚

---

### 1.2.5 `action`

```json
"action": {
  "default_icon": "src/assets/images/icon.png"
}
```

âœ… **ä½œç”¨:**
å®šä¹‰æµè§ˆå™¨å·¥å…·æ ä¸Šæ‰©å±•æŒ‰é’®ï¼ˆactionï¼‰çš„è®¾ç½®ï¼Œå¦‚ï¼š

* `default_icon`: è®¾ç½® toolbar ä¸Šå±•ç°å‡ºçš„å›¾æ ‡ã€‚

âœ… å°Tip:
å¯ä»¥é…ç½® `default_popup` æ¥ä¸º button è®¾ç½®ä¸€ä¸ªå¼¹å‡ºé¡µé¢ï¼Œä½†æ˜¯æ­¤é¡¹ç›®ä¸­å·²è¢«æ³¨é‡Šæ‰ï¼Œå› ä¸ºå®ƒä¸ `chrome.action.onClicked` äº‹ä»¶å‘ç”Ÿå†²çªã€‚

---

### 1.2.6 `icons`

```json
"icons": {
  "16": "src/assets/images/icon-16.png",
  "32": "src/assets/images/icon-32.png",
  "48": "src/assets/images/icon-48.png",
  "128": "src/assets/images/icon-128.png"
}
```

âœ… **ä½œç”¨:**
å®šä¹‰ä¸åŒå°ºå¯¸ä¸‹æ‰©å±•æ‰€ä½¿ç”¨çš„ iconï¼Œå»ºè®®å‡†å¤‡ 16, 32, 48, 128 å››ç§å°ºå¯¸ã€‚

---

### 1.2.7 `content_scripts`

```json
"content_scripts": [
  {
    "js": ["src/scripts/content.js"],
    "matches": [
      "https://developer.chrome.com/docs/extensions/*",
      "https://developer.chrome.com/docs/webstore/*",
      "https://developer.chrome.com/docs/extensions/reference/*"
    ]
  }
]
```

âœ… **ä½œç”¨:**
æŒ‡å®šå“ªä¸ª `JavaScript æ–‡ä»¶`ï¼ˆé€šå¸¸ä¸º content scriptï¼‰éœ€è¦è‡ªåŠ¨æ’å…¥åˆ°å“ªä¸ªé¡µé¢ä¸­ã€‚

âœ… `matches`:
æ˜¯ä¸€ä¸ª URL pattern åˆ—è¡¨ï¼Œåªæœ‰åŒ¹é…åˆ°å®ƒæ—¶ï¼Œæ‰©å±•æ‰ä¼šè‡ªåŠ¨æ’å…¥å¯¹åº”çš„ scriptã€‚

---

### 1.2.8 `background`

```json
"background": {
  "service_worker": "src/scripts/service-worker.js",
  "type": "module"
}
```

âœ… **ä½œç”¨:**
å®šä¹‰ **æ‰©å±•çš„ service worker**ï¼ˆç”± MV3 å–ä»£ MV2 çš„ background pageï¼‰ï¼Œè´Ÿè´£å¤„ç†é•¿æ—¶äº‹ä»¶ï¼Œå¦‚ alarmã€message ç­‰ã€‚

âœ… `type: "module"` è®© service worker èƒ½ä½¿ç”¨ ES Moduleè¯­æ³•ï¼ˆ`import/export`ï¼‰ã€‚

---

### 1.2.9 `permissions`

```json
"permissions": ["activeTab", "scripting", "storage", "alarms"]
```

âœ… **ä½œç”¨:**
åˆ—å‡ºæ‰©å±•éœ€è¦è·å¾—çš„æƒé™ï¼Œåªæœ‰ç”³è¯·åˆ°è®¸å¯åï¼Œæ‰©å±•å¯ä»¥ï¼š

* `activeTab`: è®¿é—®å½“å‰æ ‡ç­¾é¡µã€‚
* `scripting`: åŠ¨æ€åœ°æ’å…¥/ç§»é™¤è„šæœ¬ã€‚
* `storage`: è¯»å†™ `chrome.storage`ã€‚
* `alarms`: è®¾ç½®å‘¨æœŸæ€§çš„ alarm äº‹ä»¶ã€‚

---

### 1.2.10 `host_permissions`

```json
"host_permissions": ["https://chrome.dev/f/*"]
```

âœ… **ä½œç”¨:**
èµ‹äºˆæ‰©å±•å¯ä»¥å¯¹æŒ‡å®šåŸŸè¿›è¡Œæ“ä½œï¼Œå¦‚å¯ä»¥å¯¹ `https://chrome.dev/f/*` ä¸‹çš„é¡µé¢è¿›è¡Œæ“ä½œã€‚

---

### 1.2.11 `commands`

```json
"commands": {
  "_execute_action": {
    "suggested_key": {
      "default": "Ctrl+B",
      "mac": "Command+B"
    }
  }
}
```

âœ… **ä½œç”¨:**
ä¸ºæ‰©å±•å®šä¹‰å¿«æ·é”®ï¼Œ`_execute_action` æ˜¯ä¿ç•™å­—ï¼ŒæŒ‰ä¸‹æ­¤å¿«æ·æ—¶ï¼Œä¼šè§¦å‘ `chrome.action`ï¼Œæ¯”å¦‚å¯ä»¥æ‰“å¼€å¼¹å‡ºé¡µé¢ã€‚

---

### 1.2.12 `minimum_chrome_version`

```json
"minimum_chrome_version": "102"
```

âœ… **ä½œç”¨:**
æŒ‡å®šä½ çš„æ‰©å±•éœ€è¦å“ªä¸ªæœ€å°‘ç‰ˆæœ¬çš„ Chrome æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚

---

### 1.2.13 `omnibox`

```json
"omnibox": {
  "keyword": "api"
}
```

âœ… **ä½œç”¨:**
é…ç½®æ‰©å±•å¯ä»¥åœ¨ **omniboxï¼ˆæµè§ˆå™¨é¡¶éƒ¨çš„è¾“å…¥æ¡†ï¼‰** ä¸­è¿›è¡Œäº¤äº’ï¼Œ
å…¶ä¸­ `keyword` æ˜¯è§¦å‘å…³é”®å­—ï¼Œè¾“å…¥ `api `ï¼ˆåæœ‰ç©ºæ ¼ï¼‰æ—¶ï¼Œä¼šè¿›å…¥æ‰©å±•æä¾›çš„å»ºè®®æ¨¡å¼ã€‚

---

### ğŸ”¹æ•´ä½“æ€»ç»“

âœ… `manifest.json` æ˜¯æ¯ä¸€ä¸ª Chrome æ‰©å±•å¿…éœ€ä¸”æœ€é‡è¦çš„é…ç½®æ–‡ä»¶ã€‚

âœ… æ¯ä¸€ä¸ªå­—æ®µå‡æœ‰å…·ä½“ä½œç”¨ï¼Œå¸®åŠ©æµè§ˆå™¨äº†è§£ä½ çš„æ‰©å±•ï¼š

* éœ€è¦å“ªä¸ªæƒé™
* æœ‰å“ªä¸ª UI å…¥å£ï¼ˆactionï¼‰
* æœ‰å“ªä¸ª service worker åœ¨åå°å¤„ç†äº‹ä»¶
* æœ‰å“ªä¸ª content script æ³¨å…¥åˆ°å“ªä¸ªé¡µé¢ä¸­
* æœ‰å“ªä¸ªå¿«æ·æ–¹å¼å¯ä»¥è°ƒèµ·å®ƒ

âœ… MV3 è¾ƒ MV2 æœ‰é‡å¤§æ”¹åŠ¨ï¼Œå¦‚ï¼š

* background page å·²ç»è¢« service worker å–ä»£
* manifest_version éœ€è¦è®¾ç½®ä¸º 3
* æƒé™éœ€è¦æ›´ç»†ç²’åº¦åœ°é…ç½®ï¼ˆ`permissions` vs `host_permissions`ï¼‰

---

## 1.3 æœ¬åœ°è°ƒè¯•

[Debug](https://developer.chrome.com/docs/extensions/get-started/tutorial/debug)


åœ¨å¼€å‘è€…æ¨¡å¼ä¸‹åŠ è½½æœªå°è£…çš„æ‰©å±•ç¨‹åºï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. åœ¨æ–°æ ‡ç­¾é¡µä¸­è¾“å…¥ `chrome://extensions` å³å¯å‰å¾€â€œæ‰©å±•ç¨‹åºâ€é¡µé¢ã€‚ï¼ˆæ ¹æ®è®¾è®¡ï¼Œ`chrome://` ç½‘å€ä¸å¯é“¾æ¥ã€‚ï¼‰
  æˆ–è€…ï¼Œç‚¹å‡»â€œæ‰©å±•ç¨‹åºâ€èœå•æ‹¼å›¾æŒ‰é’®ï¼Œç„¶åé€‰æ‹©èœå•åº•éƒ¨çš„ç®¡ç†æ‰©å±•ç¨‹åºã€‚
  æˆ–è€…ï¼Œç‚¹å‡» Chrome èœå•ï¼Œå°†é¼ æ ‡æ‚¬åœåœ¨æ›´å¤šå·¥å…·ä¸Šï¼Œç„¶åé€‰æ‹©æ‰©å±•ç¨‹åºã€‚
2. ç‚¹å‡»å¼€å‘è€…æ¨¡å¼æ—è¾¹çš„åˆ‡æ¢å¼€å…³ï¼Œå³å¯**å¯ç”¨å¼€å‘è€…æ¨¡å¼**ã€‚
3. ç‚¹å‡»**åŠ è½½å·²è§£å‹ç¼©çš„æ–‡ä»¶æŒ‰é’®**ï¼Œç„¶åé€‰æ‹©æ‰©å±•ç¨‹åºç›®å½•ã€‚

