---
title: 3-4.MCP
---

## 含义
MCP（Model Context Protocol）是一种用于“把外部工具与数据连接到模型”的协议。通过 MCP，Agent 可以以统一方式访问文件、数据库、API、设计工具等能力，从而获得更丰富的上下文与可执行操作。

## 安装
常见方式如下，具体以你的客户端或运行环境为准：
- 安装 MCP Server：每个能力通常对应一个独立的 MCP Server（可从官方或社区仓库获取）。
- 本地配置：在客户端配置文件中添加 MCP Server（例如 `mcp.json`），包含名称、启动命令与参数等。
- 启动与验证：重启客户端或服务后，通过日志或内置命令确认 MCP Server 可用。

## 用法
- 配置：在 `mcp.json` 中注册 MCP Server。
- 调用：在对话中让 Agent 使用对应能力（通常由工具名或功能描述触发）。
- 迭代：根据任务反馈调整参数或权限范围。

## Client 与 Server 的区别
### MCP Server
- 负责对外暴露能力（tools / resources / prompts）。
- 通过传输层与客户端通信，常见方式是 stdio 或 Streamable HTTP。
- 可作为本地进程或远程服务运行。

### MCP Client
- 通过传输层连接 MCP Server。
- 发现并调用 tools / resources / prompts。
- 在 stdio 模式下通常由客户端启动服务器子进程。

## TypeScript SDK 的具体实现（TypeScript）
以下以官方 TypeScript SDK 为例，展示典型实现思路：

### Server 侧（暴露能力）
1. 创建 `McpServer` 实例。
2. 注册 tools / resources / prompts（定义输入输出与行为）。
3. 选择传输方式（stdio 或 Streamable HTTP），并 `connect` 启动服务。

### Client 侧（连接与调用）
1. 创建 `Client` 实例。
2. 选择传输方式并连接到目标 MCP Server。
3. 通过高层接口调用：`listTools`、`callTool`、`listResources`、`readResource`、`listPrompts`、`getPrompt`。

### 实例与参考
- 官方 SDK 仓库提供可运行的 server / client 示例，可作为上手入口。
- 进阶能力如 sampling、elicitation、tasks 也有配套示例和文档。

## 优秀示例及介绍
以下示例可作为学习参考：
- [context7](https://github.com/upstash/context7)：文档与代码上下文检索的 MCP Server 示例。
- [modelcontextprotocol/typescript-sdk](https://github.com/modelcontextprotocol/typescript-sdk)：官方 TypeScript SDK（含完整示例与文档）。
- [Model Context Protocol Documentation](https://modelcontextprotocol.io)：官方文档与指南。
- [MCP Specification](https://spec.modelcontextprotocol.io)：协议规范与数据结构说明。
- [MCP Apps](https://modelcontextprotocol.io/docs/extensions/apps)：MCP App 的完整实现示例（服务端 + UI）。
- [SDK API Documentation](https://modelcontextprotocol.github.io)：SDK API 参考。
