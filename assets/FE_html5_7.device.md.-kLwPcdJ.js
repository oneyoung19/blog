import{_ as p,C as k,c as o,o as d,b0 as e,j as n,b as v,e as f}from"./chunks/framework.Ctc7-3V1.js";const r={data(){return{recorderVisible:!1}},computed:{isIos(){return/iPhone|iPad/.test(window.navigator.userAgent)},mediaRecorderConfig(){return this.isIos?{video:{aspectRatio:1/1},mirror:!0}:{video:{aspectRatio:4/3},mirror:!0}}},mounted(){window.onload=function(){const c=document.querySelector(".toggle"),a=document.querySelector(".fullscreen-area");c.addEventListener("click",()=>{document.fullscreenElement?document.exitFullscreen():a.requestFullscreen()}),document.addEventListener("fullscreenchange",s=>{console.log("change",s)}),document.addEventListener("fullscreenerror",s=>{console.log("error",s)})}},methods:{handleClick(){this.recorderVisible=!0},handleTakePhoto(c){console.log("Download Photo");const{dataUrl:a}=c,s=document.createElement("a");s.href=a,s.download="avatar.png",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}},F=JSON.parse('{"title":"7.设备访问","description":"","frontmatter":{"title":"7.设备访问"},"headers":[],"relativePath":"FE/html5/7.device.md","filePath":"FE/html5/7.device.md","lastUpdated":1748249253000}');function E(c,a,s,g,t,i){const l=k("MediaRecorder");return d(),o("div",null,[a[1]||(a[1]=e(`<p data-v-0c47c92f><code data-v-0c47c92f>HTML5</code> 的设备访问（<code data-v-0c47c92f>Device Access</code>）功能允许 <code data-v-0c47c92f>Web</code> 应用程序通过浏览器访问设备的输入和输出功能，从而与用户的硬件设备进行交互。</p><p data-v-0c47c92f>这使得 <code data-v-0c47c92f>Web</code> 应用可以更加紧密地集成设备功能，提供更丰富的用户体验。以下是 <code data-v-0c47c92f>HTML5</code> 中设备访问的几个方面：</p><ol data-v-0c47c92f><li data-v-0c47c92f><p data-v-0c47c92f>地理位置（<code data-v-0c47c92f>Geolocation</code>）：<code data-v-0c47c92f>HTML5</code> 引入了 <code data-v-0c47c92f>Geolocation API</code>，使得 <code data-v-0c47c92f>Web</code> 应用能够获取用户设备的地理位置信息。这为开发基于地理位置的应用（如地图导航、位置服务等）提供了便捷的途径。</p></li><li data-v-0c47c92f><p data-v-0c47c92f>摄像头和麦克风（<code data-v-0c47c92f>Media Devices</code>）：通过 <code data-v-0c47c92f>Media Devices API</code>，<code data-v-0c47c92f>Web</code> 应用可以访问用户设备的摄像头和麦克风，从而实现实时视频通话、视频录制和音频录制等功能。</p></li><li data-v-0c47c92f><p data-v-0c47c92f>传感器数据（<code data-v-0c47c92f>Sensors</code>）：<code data-v-0c47c92f>HTML5</code> 还提供了一系列传感器 <code data-v-0c47c92f>API</code>，如加速度计、陀螺仪、罗盘等，使得 <code data-v-0c47c92f>Web</code> 应用可以获取设备的物理传感器数据，用于游戏、导航、体感应用等。</p></li><li data-v-0c47c92f><p data-v-0c47c92f>屏幕方向（<code data-v-0c47c92f>Screen Orientation</code>）：<code data-v-0c47c92f>Screen Orientation API</code> 允许 <code data-v-0c47c92f>Web</code> 应用检测用户设备的屏幕方向，从而根据设备的横竖屏状态来调整页面布局和显示方式。</p></li><li data-v-0c47c92f><p data-v-0c47c92f>全屏显示（<code data-v-0c47c92f>Full-Screen</code>）：<code data-v-0c47c92f>HTML5</code> 引入了 <code data-v-0c47c92f>Full-Screen API</code>，允许 <code data-v-0c47c92f>Web</code> 应用以全屏模式运行，使得应用能够充分利用设备的屏幕空间。</p></li></ol><p data-v-0c47c92f>通过这些设备访问的 <code data-v-0c47c92f>API</code>，<code data-v-0c47c92f>HTML5</code> 使得 <code data-v-0c47c92f>Web</code> 应用能够更好地融合到用户的硬件设备中，为开发者提供了更多创新的可能性，同时也为用户带来了更丰富、更便捷的使用体验。然而，出于安全考虑，浏览器通常会要求用户明确授权，才允许 <code data-v-0c47c92f>Web</code> 应用访问设备的功能。</p><h2 id="_1-geolocation" tabindex="-1" data-v-0c47c92f>1.Geolocation <a class="header-anchor" href="#_1-geolocation" aria-label="Permalink to &quot;1.Geolocation&quot;" data-v-0c47c92f>​</a></h2><p data-v-0c47c92f><code data-v-0c47c92f>HTML5</code> 中的 <code data-v-0c47c92f>Geolocation API</code> 提供了以下几种方法：</p><ol data-v-0c47c92f><li data-v-0c47c92f><code data-v-0c47c92f>getCurrentPosition</code></li><li data-v-0c47c92f><code data-v-0c47c92f>watchPosition</code></li><li data-v-0c47c92f><code data-v-0c47c92f>clearWatch</code></li></ol><p data-v-0c47c92f><strong data-v-0c47c92f>这三种方法均在 <code data-v-0c47c92f>Secure Context</code> 即 <code data-v-0c47c92f>Https</code> 的场景下才被允许（本地调试，可以使用 <code data-v-0c47c92f>localhost</code> 地址）。</strong></p><div class="language-js vp-adaptive-theme" data-v-0c47c92f><button title="Copy Code" class="copy" data-v-0c47c92f></button><span class="lang" data-v-0c47c92f>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-0c47c92f><code data-v-0c47c92f><span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f> successCallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-0c47c92f>position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-0c47c92f>coords</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f>longitude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f>latitude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f>accuracy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> } } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> position</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;success&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, position, longitude, latitude, accuracy)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>}</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f> watchCallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-0c47c92f>position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-0c47c92f>coords</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f>longitude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f>latitude</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> } } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> position</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;watch&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, position, longitude, latitude)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>}</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f> errorCallback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-0c47c92f>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(error)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>}</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  maximumAge: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f>0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>,</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  timeout: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f>Infinity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>,</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  enablehighaccuracy: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f>false</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>}</span></span>
<span class="line" data-v-0c47c92f></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>navigator.geolocation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>getCurrentPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(successCallback, errorCallback, options)</span></span>
<span class="line" data-v-0c47c92f></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f> watchId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> navigator.geolocation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>watchPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(watchCallback, errorCallback, options)</span></span>
<span class="line" data-v-0c47c92f></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>navigator.geolocation.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>clearWatch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(watchId)</span></span></code></pre></div><p data-v-0c47c92f><em data-v-0c47c92f><code data-v-0c47c92f>successCallback</code></em> 中的 <code data-v-0c47c92f>position</code> 中会含有坐标点 <code data-v-0c47c92f>coords</code> 信息。</p><p data-v-0c47c92f>在 <code data-v-0c47c92f>coords</code> 中会包含 经度 <code data-v-0c47c92f>longitude</code>、纬度 <code data-v-0c47c92f>longitude</code>、精准度 <code data-v-0c47c92f>accuracy</code>（单位 <code data-v-0c47c92f>meters</code>，表示经纬度与实际地址可能差了多少米）。</p><p data-v-0c47c92f><em data-v-0c47c92f><code data-v-0c47c92f>errorCallback</code></em> 通常在用户未授权或者不满足 <code data-v-0c47c92f>Secure Context</code> 的场景下会触发。譬如在 <code data-v-0c47c92f>Chrome</code> 浏览器下，打印 <code data-v-0c47c92f>error</code>，可能会是：</p><div class="language- vp-adaptive-theme" data-v-0c47c92f><button title="Copy Code" class="copy" data-v-0c47c92f></button><span class="lang" data-v-0c47c92f></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-0c47c92f><code data-v-0c47c92f><span class="line" data-v-0c47c92f><span data-v-0c47c92f>{</span></span>
<span class="line" data-v-0c47c92f><span data-v-0c47c92f>  code: 1,</span></span>
<span class="line" data-v-0c47c92f><span data-v-0c47c92f>  message: &quot;Only secure origins are allowed (see: https://goo.gl/Y0ZkNV).</span></span>
<span class="line" data-v-0c47c92f><span data-v-0c47c92f>}</span></span></code></pre></div><p data-v-0c47c92f><em data-v-0c47c92f><code data-v-0c47c92f>options</code></em> 可配置如下几种属性：</p><ol data-v-0c47c92f><li data-v-0c47c92f><p data-v-0c47c92f><code data-v-0c47c92f>enableHighAccuracy</code>（布尔值，默认值为 <code data-v-0c47c92f>false</code>）： 指定是否使用高精度位置信息。如果为 <code data-v-0c47c92f>true</code>，则 <code data-v-0c47c92f>API</code> 将尝试获取更精确的位置信息，通常使用 <code data-v-0c47c92f>GPS</code>。这可能会增加获取位置信息的时间和电池消耗。</p></li><li data-v-0c47c92f><p data-v-0c47c92f><code data-v-0c47c92f>timeout</code>（毫秒，默认值为 <code data-v-0c47c92f>Infinity</code>）： 指定获取位置信息的最大等待时间。如果在指定的时间内无法获取位置信息，将触发错误回调。如果设为 <code data-v-0c47c92f>Infinity</code>，则表示没有超时限制。</p></li><li data-v-0c47c92f><p data-v-0c47c92f><code data-v-0c47c92f>maximumAge</code>（毫秒，默认值为 <code data-v-0c47c92f>0</code>）： 指定允许使用的最大缓存位置的最大年龄。如果设置为 <code data-v-0c47c92f>0</code>，则表示不使用缓存的位置信息。</p></li></ol><h2 id="_2-media-devices" tabindex="-1" data-v-0c47c92f>2.Media Devices <a class="header-anchor" href="#_2-media-devices" aria-label="Permalink to &quot;2.Media Devices&quot;" data-v-0c47c92f>​</a></h2>`,16)),n("template",null,[n("button",{onClick:a[0]||(a[0]=(...h)=>i.handleClick&&i.handleClick(...h)),class:"media-btn"},"Start Media"),t.recorderVisible?(d(),v(l,{key:0,visible:t.recorderVisible,config:i.mediaRecorderConfig,onTakePhoto:i.handleTakePhoto},null,8,["visible","config","onTakePhoto"])):f("",!0)]),a[2]||(a[2]=e(`<p data-v-0c47c92f>这部分功能可分为<strong data-v-0c47c92f>摄像</strong>、<strong data-v-0c47c92f>视频录制及重播</strong>以及<strong data-v-0c47c92f>拍照</strong>。</p><p data-v-0c47c92f>笔者在业务开发中封装了一套 <code data-v-0c47c92f>media</code> 库，可点击上面 <code data-v-0c47c92f>Start Media</code> 按钮，体验摄像以及拍照功能。</p><h2 id="_3-sensors" tabindex="-1" data-v-0c47c92f>3.Sensors <a class="header-anchor" href="#_3-sensors" aria-label="Permalink to &quot;3.Sensors&quot;" data-v-0c47c92f>​</a></h2><p data-v-0c47c92f>目前，<code data-v-0c47c92f>Sensor API</code> 提供了以下几种传感器：</p><ol data-v-0c47c92f><li data-v-0c47c92f><p data-v-0c47c92f><code data-v-0c47c92f>Accelerometer</code>（加速度计传感器）： 用于测量设备在 <code data-v-0c47c92f>X</code>、<code data-v-0c47c92f>Y</code> 和 <code data-v-0c47c92f>Z</code> 轴上的加速度。</p></li><li data-v-0c47c92f><p data-v-0c47c92f><code data-v-0c47c92f>Gyroscope</code>（陀螺仪传感器）： 用于测量设备的旋转速度。</p></li><li data-v-0c47c92f><p data-v-0c47c92f><code data-v-0c47c92f>Magnetometer</code>（磁力计传感器）： 用于测量设备周围的磁场。</p></li><li data-v-0c47c92f><p data-v-0c47c92f><code data-v-0c47c92f>AmbientLightSensor</code>（环境光传感器）： 用于测量周围环境的光照强度。</p></li><li data-v-0c47c92f><p data-v-0c47c92f><code data-v-0c47c92f>ProximitySensor</code>（接近传感器）： 用于检测物体与设备的距离。</p></li><li data-v-0c47c92f><p data-v-0c47c92f><code data-v-0c47c92f>AbsoluteOrientationSensor</code>（绝对方向传感器）： 用于获取设备的绝对方向，包括旋转、倾斜和方向。</p></li></ol><p data-v-0c47c92f>譬如使用加速度计传感器 <code data-v-0c47c92f>Accelerometer</code>：</p><div class="language-js vp-adaptive-theme" data-v-0c47c92f><button title="Copy Code" class="copy" data-v-0c47c92f></button><span class="lang" data-v-0c47c92f>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-0c47c92f><code data-v-0c47c92f><span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;Accelerometer&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> window) {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f> accelerometer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f> Accelerometer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>()</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  accelerometer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;reading&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;Acceleration along X-axis: &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> accelerometer.x)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;Acceleration along Y-axis: &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> accelerometer.y)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;Acceleration along Z-axis: &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> accelerometer.z)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  })</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  accelerometer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>()</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;Accelerometer not supported&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>}</span></span></code></pre></div><h2 id="_4-screen-orientation" tabindex="-1" data-v-0c47c92f>4.Screen Orientation <a class="header-anchor" href="#_4-screen-orientation" aria-label="Permalink to &quot;4.Screen Orientation&quot;" data-v-0c47c92f>​</a></h2><p data-v-0c47c92f><a href="https://developer.mozilla.org/en-US/docs/Web/API/ScreenOrientation" target="_blank" rel="noreferrer" data-v-0c47c92f>Screen Orientation API</a></p><p data-v-0c47c92f><code data-v-0c47c92f>Screen Orientation</code> 可以支持开发者在 <code data-v-0c47c92f>Web</code> 应用中判断横竖屏方向，进而兼容应用的实现方式。</p><p data-v-0c47c92f><strong data-v-0c47c92f>相对于 <code data-v-0c47c92f>Andriod</code>，在 <code data-v-0c47c92f>IOS</code> 上，系统权限更加严格，因此 <code data-v-0c47c92f>Screen Orientation</code> 在实际应用中的兼容性并不乐观</strong>。</p><p data-v-0c47c92f>不过我们依然先总结下 <code data-v-0c47c92f>Screen Orientation</code> 的相关属性和 <code data-v-0c47c92f>API</code>。</p><p data-v-0c47c92f>目前官方推荐使用的相关属性和 <code data-v-0c47c92f>API</code> 有如下几种：</p><ol data-v-0c47c92f><li data-v-0c47c92f>一个属性 <ul data-v-0c47c92f><li data-v-0c47c92f><code data-v-0c47c92f>window.screen.orientation</code>，包含如下属性 <code data-v-0c47c92f>{angle: 0, type: &#39;landscape-primary&#39;, onchange: null}</code>。</li></ul></li><li data-v-0c47c92f>两个方法 <ul data-v-0c47c92f><li data-v-0c47c92f><code data-v-0c47c92f>window.screen.orientation.lock(orientation)</code> 锁定指定的屏幕方向</li><li data-v-0c47c92f><code data-v-0c47c92f>window.screen.orientation.unlock()</code> 解锁方向</li></ul></li><li data-v-0c47c92f>一个事件 <ul data-v-0c47c92f><li data-v-0c47c92f><code data-v-0c47c92f>window.screen.orientation.addEventListener(&#39;change&#39;, callback)</code></li></ul></li></ol><p data-v-0c47c92f>然而实际上，以上属性和 <code data-v-0c47c92f>API</code> 的兼容性在 <code data-v-0c47c92f>IOS</code> 上均不理想。</p><p data-v-0c47c92f>因此可以选择 <code data-v-0c47c92f>window</code> 上的相关属性和事件监听：</p><div class="language-js vp-adaptive-theme" data-v-0c47c92f><button title="Copy Code" class="copy" data-v-0c47c92f></button><span class="lang" data-v-0c47c92f>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-0c47c92f><code data-v-0c47c92f><span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;onorientationchange&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> window) {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;orientationchange&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;orientationchange&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  })</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> (window.orientation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> window.orientation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f> 180</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>) {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-0c47c92f>    // 竖屏</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-0c47c92f>    // 横屏</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>  }</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>}</span></span></code></pre></div><p data-v-0c47c92f>关于更多横竖屏的检测与适配，可以参考文章：</p><ul data-v-0c47c92f><li data-v-0c47c92f><a href="http://caibaojian.com/landscape_mode.html" target="_blank" rel="noreferrer" data-v-0c47c92f>移动设备强制横屏显示以及兼容问题</a></li></ul><h2 id="_5-full-screen" tabindex="-1" data-v-0c47c92f>5.Full-Screen <a class="header-anchor" href="#_5-full-screen" aria-label="Permalink to &quot;5.Full-Screen&quot;" data-v-0c47c92f>​</a></h2><p data-v-0c47c92f><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API" target="_blank" rel="noreferrer" data-v-0c47c92f>Fullscreen API</a></p><ol data-v-0c47c92f><li data-v-0c47c92f><p data-v-0c47c92f>一个属性</p><ul data-v-0c47c92f><li data-v-0c47c92f><code data-v-0c47c92f>document.fullscreenElement</code> 标识是否存在全屏元素</li></ul></li><li data-v-0c47c92f><p data-v-0c47c92f>两个方法</p><ul data-v-0c47c92f><li data-v-0c47c92f><code data-v-0c47c92f>fullscreenElement.requestFullscreen()</code> 目标元素进行全屏</li><li data-v-0c47c92f><code data-v-0c47c92f>document.exitFullscreen()</code> 文档退出全屏</li></ul></li><li data-v-0c47c92f><p data-v-0c47c92f>两个事件</p><ul data-v-0c47c92f><li data-v-0c47c92f><code data-v-0c47c92f>fullscreenchange</code> 全屏更改监听事件</li><li data-v-0c47c92f><code data-v-0c47c92f>fullscreenerror</code> 全屏错误监听事件</li></ul></li></ol><p data-v-0c47c92f>另外，由于存在浏览器兼容性，因此在实际业务开发中，可以考虑使用<a href="https://github.com/sindresorhus/screenfull" target="_blank" rel="noreferrer" data-v-0c47c92f>screenfull</a>第三方库。</p><p data-v-0c47c92f>点击下例中的 <code data-v-0c47c92f>Toggle</code> 按钮尝试：</p><div class="fullscreen-area" data-v-0c47c92f><button class="toggle" data-v-0c47c92f>Toggle</button></div><p data-v-0c47c92f>核心 <code data-v-0c47c92f>JS</code> 代码如下：</p><div class="language-js vp-adaptive-theme" data-v-0c47c92f><button title="Copy Code" class="copy" data-v-0c47c92f></button><span class="lang" data-v-0c47c92f>js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" data-v-0c47c92f><code data-v-0c47c92f><span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f> btn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;.toggle&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;" data-v-0c47c92f> targetElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;.fullscreen-area&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>)</span></span>
<span class="line" data-v-0c47c92f></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>btn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;" data-v-0c47c92f> // const targetElement = document.documentElement</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> (document.fullscreenElement) {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>   document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>exitFullscreen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>()</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f>else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>   targetElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>requestFullscreen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>()</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> }</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>})</span></span>
<span class="line" data-v-0c47c92f></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;fullscreenchange&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-0c47c92f>e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;change&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, e)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>})</span></span>
<span class="line" data-v-0c47c92f></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;fullscreenerror&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;" data-v-0c47c92f>e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;" data-v-0c47c92f> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> {</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;" data-v-0c47c92f>log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;" data-v-0c47c92f>&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>, e)</span></span>
<span class="line" data-v-0c47c92f><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;" data-v-0c47c92f>})</span></span></code></pre></div>`,27))])}const u=p(r,[["render",E],["__scopeId","data-v-0c47c92f"]]);export{F as __pageData,u as default};
