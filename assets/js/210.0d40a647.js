(window.webpackJsonp=window.webpackJsonp||[]).push([[210],{669:function(e,v,a){"use strict";a.r(v);var s=a(40),_=Object(s.a)({},(function(){var e=this,v=e.$createElement,a=e._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("镜像可以看做是一个只读的模板，用来创建 "),a("code",[e._v("Docker")]),e._v(" 容器。")]),e._v(" "),a("p",[e._v("镜像是由一系列的层叠而成的，每一层都代表一个 "),a("code",[e._v("Dockerfile")]),e._v(" 指令。")]),e._v(" "),a("p",[e._v("如果用类比的方法，"),a("strong",[e._v("可以把镜像看做是一个容器的 "),a("code",[e._v("class")]),e._v(" 类，而容器则是镜像的实例")]),e._v("。")]),e._v(" "),a("h2",{attrs:{id:"镜像的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像的分类"}},[e._v("#")]),e._v(" 镜像的分类")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 镜像分为两种，分别是 "),a("code",[e._v("基础镜像")]),e._v(" 和 "),a("code",[e._v("定制镜像")]),e._v("。")]),e._v(" "),a("h3",{attrs:{id:"基础镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础镜像"}},[e._v("#")]),e._v(" 基础镜像")]),e._v(" "),a("p",[a("code",[e._v("基础镜像")]),e._v(" 是由 "),a("code",[e._v("Docker")]),e._v(" 官方提供的，可以直接使用。")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 官方提供了很多 "),a("code",[e._v("基础镜像")]),e._v("，可以在 "),a("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Hub"),a("OutboundLink")],1),e._v(" 上找到。")]),e._v(" "),a("h3",{attrs:{id:"定制镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定制镜像"}},[e._v("#")]),e._v(" 定制镜像")]),e._v(" "),a("p",[a("code",[e._v("定制镜像")]),e._v(" 是由 "),a("code",[e._v("Dockerfile")]),e._v(" 文件来创建的，可以根据自己的需求来定制。")]),e._v(" "),a("h2",{attrs:{id:"镜像的命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像的命名"}},[e._v("#")]),e._v(" 镜像的命名")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 镜像的命名格式为 "),a("code",[e._v("仓库名:标签")]),e._v("，其中 "),a("code",[e._v("仓库名")]),e._v(" 和 "),a("code",[e._v("标签")]),e._v(" 都是可选的。")]),e._v(" "),a("ul",[a("li",[e._v("仓库名：可以是 "),a("code",[e._v("Docker Hub")]),e._v(" 上的用户名，也可以是 "),a("code",[e._v("Docker Hub")]),e._v(" 上的组织名，也可以是 "),a("code",[e._v("Docker Hub")]),e._v(" 以外的仓库地址。")]),e._v(" "),a("li",[e._v("标签：可以是 "),a("code",[e._v("Docker Hub")]),e._v(" 上的标签，也可以是 "),a("code",[e._v("Docker Hub")]),e._v(" 以外的标签。")]),e._v(" "),a("li",[e._v("如果仓库名和标签都没有指定，那么默认会使用 "),a("code",[e._v("Docker Hub")]),e._v(" 上的 "),a("code",[e._v("library")]),e._v(" 组织名，以 "),a("code",[e._v("latest")]),e._v(" 标签。")]),e._v(" "),a("li",[e._v("如果仓库名没有指定，但是标签指定了，那么默认会使用 "),a("code",[e._v("Docker Hub")]),e._v(" 上的 "),a("code",[e._v("library")]),e._v(" 组织名。")]),e._v(" "),a("li",[e._v("如果仓库名指定了，但是标签没有指定，那么默认会使用 "),a("code",[e._v("latest")]),e._v(" 标签。")])]),e._v(" "),a("h2",{attrs:{id:"镜像的指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像的指令"}},[e._v("#")]),e._v(" 镜像的指令")]),e._v(" "),a("p",[e._v("本节主要总结镜像的相关指令。")]),e._v(" "),a("h3",{attrs:{id:"docker-image-pull"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-pull"}},[e._v("#")]),e._v(" docker image pull")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 镜像的拉取可以使用 "),a("code",[e._v("docker image pull")]),e._v("  或者 "),a("code",[e._v("docker pull")]),e._v("命令。")]),e._v(" "),a("p",[e._v("第一种拉取方式，是使用"),a("strong",[e._v("仓库名和版本号")]),e._v("。")]),e._v(" "),a("p",[e._v("基本格式如下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image pull 仓库名:版本号\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("譬如以下几种形式的示例：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 拉取官方的 hello-world 镜像")]),e._v("\ndocker image pull hello-world\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 拉取官方的 alpine 镜像")]),e._v("\ndocker image pull alpine\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 拉取官方的 alpine 镜像，指定标签为 3.12")]),e._v("\ndocker image pull alpine:3.12\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 拉取官方的 alpine 镜像，指定标签为 3.12，指定仓库地址为 docker.io")]),e._v("\ndocker image pull docker.io/alpine:3.12\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 拉取官方的 alpine 镜像，指定标签为 3.12，指定仓库地址为 docker.io，指定仓库名为 library")]),e._v("\ndocker image pull docker.io/library/alpine:3.12\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br")])]),a("p",[a("strong",[e._v("当未声明版本时，默认拉取最新版本")]),e._v("。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/Not-Count-Contribution/img/20230411212447.png",alt:""}})]),e._v(" "),a("p",[e._v("第二种拉取方式，是使用 "),a("strong",[a("code",[e._v("sha")]),e._v(" 散列值")]),e._v("。")]),e._v(" "),a("p",[e._v("基本格式如下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image pull sha:id\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("code",[e._v("sha")]),e._v(" 散列值，是 "),a("code",[e._v("Docker")]),e._v(" 镜像的唯一标识。")]),e._v(" "),a("p",[e._v("它的作用，是能够保证镜像的完整性，防止镜像被篡改。")]),e._v(" "),a("p",[a("code",[e._v("sha")]),e._v(" 散列值，可以通过 "),a("code",[e._v("docker image inspect 镜像名")]),e._v(" 命令来查看。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/Not-Count-Contribution/img/20230411213349.png",alt:""}})]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("关于 "),a("code",[e._v("sha")]),e._v(" 散列值和 "),a("code",[e._v("IMAGE ID")]),e._v(" 的区别，可以认为 "),a("strong",[a("code",[e._v("IMAGE ID")]),e._v(" 是 "),a("code",[e._v("sha")]),e._v(" 散列值的子集")]),e._v("。")]),e._v(" "),a("p",[e._v("譬如上面拉取的 "),a("code",[e._v("hello-world")]),e._v("，其 "),a("code",[e._v("sha")]),e._v(" 散列值是 "),a("code",[e._v("sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412")]),e._v("。")]),e._v(" "),a("p",[e._v("而其 "),a("code",[e._v("IMAGE ID")]),e._v(" 是 "),a("code",[e._v("feb5d9fea6a5")]),e._v("，也就是 "),a("code",[e._v("sha")]),e._v(" 散列值的前 12 位。")])]),e._v(" "),a("h3",{attrs:{id:"docker-image-ls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-ls"}},[e._v("#")]),e._v(" docker image ls")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 镜像的查看可以使用 "),a("code",[e._v("docker image ls")]),e._v(" 或者 "),a("code",[e._v("docker images")]),e._v(" 命令。")]),e._v(" "),a("p",[e._v("基本格式如下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ls")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("可以通过 "),a("code",[e._v("docker image ls --help")]),e._v(" 来查看相关 "),a("code",[e._v("options")]),e._v("。大致有如下几种：")]),e._v(" "),a("ul",[a("li",[e._v("-a\n"),a("ul",[a("li",[e._v("--all             Show all images (default hides intermediate images)")]),e._v(" "),a("li",[e._v("--digests         Show digests")])])]),e._v(" "),a("li",[e._v("-f\n"),a("ul",[a("li",[e._v("--filter filter   Filter output based on conditions provided")]),e._v(" "),a("li",[e._v("--format string   Pretty-print images using a Go template")]),e._v(" "),a("li",[e._v("--no-trunc        Don't truncate output")])])]),e._v(" "),a("li",[e._v("-q\n"),a("ul",[a("li",[e._v("--quiet           Only show image IDs")])])])]),e._v(" "),a("h3",{attrs:{id:"docker-image-rm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-rm"}},[e._v("#")]),e._v(" docker image rm")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 镜像的删除可以使用 "),a("code",[e._v("docker image rm")]),e._v(" 或者 "),a("code",[e._v("docker rmi")]),e._v(" 命令。")]),e._v(" "),a("p",[e._v("基本格式如下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" 镜像名\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("可以通过 "),a("code",[e._v("docker image rm --help")]),e._v(" 来查看相关 "),a("code",[e._v("options")]),e._v("。大致有如下几种：")]),e._v(" "),a("ul",[a("li",[e._v("-f\n"),a("ul",[a("li",[e._v("--force           Force removal of the image")]),e._v(" "),a("li",[e._v("--no-prune        Do not delete untagged parents")])])])]),e._v(" "),a("h3",{attrs:{id:"docker-image-prune"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-prune"}},[e._v("#")]),e._v(" docker image prune")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 镜像的清理可以使用 "),a("code",[e._v("docker image prune")]),e._v(" 命令。")]),e._v(" "),a("p",[a("strong",[e._v("该命令默认用来清理悬虚镜像")]),e._v("。")]),e._v(" "),a("p",[e._v("基本格式如下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image prune "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("可以通过 "),a("code",[e._v("docker image prune --help")]),e._v(" 来查看相关 "),a("code",[e._v("options")]),e._v("。大致有如下几种：")]),e._v(" "),a("ul",[a("li",[e._v("-a\n"),a("ul",[a("li",[e._v("--all             Remove all unused images, not just "),a("strong",[e._v("dangling")]),e._v(" ones")]),e._v(" "),a("li",[e._v("--filter filter   Provide filter values")])])]),e._v(" "),a("li",[e._v("-f\n"),a("ul",[a("li",[e._v("--force           Do not prompt for confirmation")])])])]),e._v(" "),a("p",[e._v("其中，"),a("strong",[a("code",[e._v("-a")]),e._v(" 选项会移除 "),a("code",[e._v("dangling")]),e._v(" 悬虚镜像、以及所有未被使用的镜像")]),e._v("。")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[a("strong",[e._v("悬虚镜像，指的是那些没有标签的镜像")]),e._v("，在列表中展示为 "),a("code",[e._v("<none>:<none>")]),e._v("。")]),e._v(" "),a("p",[e._v("TODO: 悬虚镜像举例")])]),e._v(" "),a("h3",{attrs:{id:"docker-image-inspect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-inspect"}},[e._v("#")]),e._v(" docker image inspect")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 镜像的检测可以使用 "),a("code",[e._v("docker image inspect")]),e._v(" 命令。")]),e._v(" "),a("p",[e._v("基本格式如下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image inspect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" 镜像名\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("strong",[e._v("该命令会返回该镜像的详细信息")]),e._v("。")]),e._v(" "),a("p",[e._v("其信息是一个 "),a("code",[e._v("json")]),e._v(" 格式的数据，可以通过 "),a("code",[e._v("--format")]),e._v(" 来指定返回的数据格式。")]),e._v(" "),a("h3",{attrs:{id:"docker-image-tag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-tag"}},[e._v("#")]),e._v(" docker image tag")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 镜像的打标签可以使用 "),a("code",[e._v("docker image tag")]),e._v(" 命令。")]),e._v(" "),a("p",[e._v("基本格式如下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image tag SOURCE_IMAGE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(":TAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" TARGET_IMAGE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(":TAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("其中，"),a("code",[e._v("SOURCE_IMAGE")]),e._v(" 是源镜像，"),a("code",[e._v("TARGET_IMAGE")]),e._v(" 是目标镜像。")]),e._v(" "),a("p",[e._v("譬如，开发了一个镜像 "),a("code",[e._v("hello-wolrd")]),e._v("，以下命令会将 "),a("code",[e._v("hello-wolrd")]),e._v(" 镜像打上 "),a("code",[e._v("v1")]),e._v(" 标签：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image tag hello-wolrd hello-wolrd:v1\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("迭代更新 "),a("code",[e._v("hello-world")]),e._v(" 之后，可以通过以下命令，将 "),a("code",[e._v("hello-wolrd")]),e._v(" 镜像打上 "),a("code",[e._v("v2")]),e._v(" 标签：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image tag hello-wolrd hello-wolrd:v2\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("strong",[e._v("这与 "),a("code",[e._v("git")]),e._v("打标签的功能，是类似的。")])]),e._v(" "),a("h3",{attrs:{id:"docker-image-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-build"}},[e._v("#")]),e._v(" docker image build")]),e._v(" "),a("p",[a("code",[e._v("Docker")]),e._v(" 镜像的构建可以使用 "),a("code",[e._v("docker image build")]),e._v(" 命令。")]),e._v(" "),a("p",[a("strong",[e._v("镜像的构建，依赖于 "),a("code",[e._v("Dockerfile")])]),e._v("。")]),e._v(" "),a("p",[e._v("基本格式如下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image build "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("PATH")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" URL "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" -\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[e._v("PATH")]),e._v(" 是 "),a("code",[e._v("Dockerfile")]),e._v(" 所在的目录。默认为当前工作目录。")]),e._v(" "),a("li",[a("code",[e._v("URL")]),e._v(" 是 "),a("code",[e._v("Dockerfile")]),e._v(" 所在的 "),a("code",[e._v("git")]),e._v(" 仓库地址。")]),e._v(" "),a("li",[a("code",[e._v("-")]),e._v(" 是指从 "),a("code",[e._v("stdin")]),e._v(" 读取 "),a("code",[e._v("Dockerfile")]),e._v("。")])]),e._v(" "),a("h3",{attrs:{id:"docker-image-history"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-history"}},[e._v("#")]),e._v(" docker image history")]),e._v(" "),a("p",[a("code",[e._v("docker image history")]),e._v(" 是一个命令行工具，用于显示 "),a("code",[e._v("Docker")]),e._v(" 镜像的历史记录，包括每一层的操作指令和对应的镜像 "),a("code",[e._v("ID")]),e._v("。")]),e._v(" "),a("p",[e._v("当你使用 "),a("code",[e._v("docker build")]),e._v(" 命令创建一个新的 "),a("code",[e._v("Docker")]),e._v(" 镜像时，每一条指令都会创建一个新的镜像层。")]),e._v(" "),a("p",[a("strong",[a("code",[e._v("docker image history")]),e._v(" 命令可以帮助你查看镜像层的变化，了解镜像是如何构建出来的")]),e._v("。")]),e._v(" "),a("p",[e._v("该命令的输出包含以下信息：")]),e._v(" "),a("ul",[a("li",[e._v("每一层的镜像 "),a("code",[e._v("ID")])]),e._v(" "),a("li",[e._v("每一层的创建时间")]),e._v(" "),a("li",[e._v("每一层所包含的文件和文件系统变化")]),e._v(" "),a("li",[e._v("每一层所执行的 "),a("code",[e._v("Dockerfile")]),e._v(" 指令")])]),e._v(" "),a("p",[e._v("这些信息可以帮助你诊断构建问题，优化构建流程，并且更好地理解镜像的组成和特性。")]),e._v(" "),a("p",[e._v("譬如，我们可以通过以下命令，查看 "),a("code",[e._v("hello-world")]),e._v(" 镜像的历史记录：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("docker image "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("history")]),e._v(" hello-world\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("打印信息如下：")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("IMAGE          CREATED         CREATED BY                                      SIZE      COMMENT\nfeb5d9fea6a5   "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("18")]),e._v(" months ago   /bin/sh -c "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v('#(nop)  CMD ["/hello"]               0B        ')]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("missing"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("18")]),e._v(" months ago   /bin/sh -c "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#(nop) COPY file:50563a97010fd7ce…   13.3kB ")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"docker-image-push"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-push"}},[e._v("#")]),e._v(" docker image push")]),e._v(" "),a("p",[a("strong",[a("code",[e._v("docker image push")]),e._v(" 用于将本地 "),a("code",[e._v("Docker")]),e._v(" 镜像推送到 "),a("code",[e._v("Docker Hub")]),e._v(" 或其他 "),a("code",[e._v("Docker Registry")]),e._v(" 上")]),e._v("。")]),e._v(" "),a("p",[e._v("它允许用户将自己的 "),a("code",[e._v("Docker")]),e._v(" 镜像分享给其他人，或者在不同的 "),a("code",[e._v("Docker")]),e._v(" 主机之间共享 "),a("code",[e._v("Docker")]),e._v(" 镜像。")]),e._v(" "),a("p",[e._v("具体来说，"),a("code",[e._v("docker image push")]),e._v(" 命令会将本地 "),a("code",[e._v("Docker")]),e._v(" 镜像上传到指定的 "),a("code",[e._v("Docker Registry")]),e._v("，上传的镜像可以通过在其他机器上运行 "),a("code",[e._v("docker image pull")]),e._v(" 命令进行获取和使用。该命令的语法如下：")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("docker image push "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(":TAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("其中，"),a("code",[e._v("NAME[:TAG]")]),e._v(" 参数指定了要推送的 "),a("code",[e._v("Docker")]),e._v(" 镜像的名称和标签。")]),e._v(" "),a("p",[e._v("需要注意的是，在使用 "),a("code",[e._v("docker image push")]),e._v(" 命令之前，需要先登录到 "),a("code",[e._v("Docker Registry")]),e._v("。可以使用 "),a("code",[e._v("docker login")]),e._v(" 命令登录到 "),a("code",[e._v("Docker Hub")]),e._v(" 或其他 "),a("code",[e._v("Docker Registry")]),e._v("。")]),e._v(" "),a("p",[e._v("此外，如果要推送的 "),a("code",[e._v("Docker")]),e._v(" 镜像太大，可能需要较长的时间进行上传。可以使用 "),a("code",[e._v("docker system prune")]),e._v(" 命令清理本地 "),a("code",[e._v("Docker")]),e._v(" 系统，以释放磁盘空间。")]),e._v(" "),a("p",[e._v("另外，对于私有的 "),a("code",[e._v("Docker Registry")]),e._v("，需要在 "),a("code",[e._v("Docker")]),e._v(" 配置文件中添加认证信息，才能够推送本地 "),a("code",[e._v("Docker")]),e._v(" 镜像。具体方法可以参考 "),a("code",[e._v("Docker")]),e._v(" 官方文档。")]),e._v(" "),a("h3",{attrs:{id:"docker-image-save"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-save"}},[e._v("#")]),e._v(" docker image save")]),e._v(" "),a("p",[a("strong",[a("code",[e._v("docker image save")]),e._v(" 用于将一个或多个 "),a("code",[e._v("Docker")]),e._v(" 镜像保存为 "),a("code",[e._v("tar")]),e._v(" 归档文件")]),e._v("。")]),e._v(" "),a("p",[e._v("这个命令将会将镜像的文件系统和元数据打包成一个 "),a("code",[e._v("tar")]),e._v(" 文件，并输出到标准输出或指定的文件中。")]),e._v(" "),a("p",[e._v("具体使用方式如下：")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("docker image save "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" IMAGE "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("IMAGE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("其中，IMAGE 表示需要保存的 "),a("code",[e._v("Docker")]),e._v(" 镜像名称或 "),a("code",[e._v("ID")]),e._v("，可以同时指定多个镜像。")]),e._v(" "),a("p",[e._v("例如，要将名为 "),a("code",[e._v("myimage:latest")]),e._v(" 的 "),a("code",[e._v("Docker")]),e._v(" 镜像保存为 "),a("code",[e._v("myimage.tar")]),e._v(" 文件，可以执行以下命令：")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("docker image save -o myimage.tar myimage:latest\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("注意，"),a("code",[e._v("docker image save")]),e._v(" 命令不会保存容器的状态，只会保存镜像本身的内容。")]),e._v(" "),a("h3",{attrs:{id:"docker-image-load"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-load"}},[e._v("#")]),e._v(" docker image load")]),e._v(" "),a("p",[a("strong",[a("code",[e._v("docker image load")]),e._v(" 用于从一个 "),a("code",[e._v("tar")]),e._v(" 归档文件中加载 "),a("code",[e._v("Docker")]),e._v(" 镜像到本地 "),a("code",[e._v("Docker")]),e._v(" 镜像库中")]),e._v("。")]),e._v(" "),a("p",[e._v("这个命令与 "),a("code",[e._v("docker image save")]),e._v(" 命令结合使用，可以用于将 "),a("code",[e._v("Docker")]),e._v(" 镜像导出到一个 "),a("code",[e._v("tar")]),e._v(" 归档文件中，并将其迁移到另一个 "),a("code",[e._v("Docker")]),e._v(" 主机上。")]),e._v(" "),a("p",[e._v("具体来说，"),a("code",[e._v("docker image load")]),e._v(" 命令将一个 "),a("code",[e._v("tar")]),e._v(" 归档文件中的 "),a("code",[e._v("Docker")]),e._v(" 镜像加载到本地 "),a("code",[e._v("Docker")]),e._v(" 镜像库中，并创建一个本地的镜像仓库。该命令的语法如下：")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("docker image load "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v(" FILE\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("其中，"),a("code",[e._v("< FILE")]),e._v(" 参数指定了要加载的 "),a("code",[e._v("tar")]),e._v(" 归档文件。")]),e._v(" "),a("p",[e._v("通常，"),a("code",[e._v("tar")]),e._v(" 归档文件是通过 "),a("code",[e._v("docker image save")]),e._v(" 命令生成的。")]),e._v(" "),a("p",[e._v("需要注意的是，使用 "),a("code",[e._v("docker image load")]),e._v(" 命令加载的 "),a("code",[e._v("Docker")]),e._v(" 镜像文件需要与本地 "),a("code",[e._v("Docker")]),e._v(" 主机的操作系统架构和版本相同。")]),e._v(" "),a("p",[e._v("如果不匹配，将会导致加载失败或者无法运行。")]),e._v(" "),a("p",[e._v("另外，"),a("strong",[e._v("如果要在多个 "),a("code",[e._v("Docker")]),e._v(" 主机之间迁移 "),a("code",[e._v("Docker")]),e._v(" 镜像，建议使用 "),a("code",[e._v("docker image save")]),e._v(" 和 "),a("code",[e._v("docker image load")]),e._v(" 命令组合")]),e._v("，而不是 "),a("code",[e._v("docker image export")]),e._v(" 和 "),a("code",[e._v("docker image import")]),e._v(" 命令组合。")]),e._v(" "),a("p",[e._v("因为 "),a("code",[e._v("docker image export")]),e._v(" 和 "),a("code",[e._v("docker image import")]),e._v(" 命令不会保留 Docker 镜像元数据和层信息，可能会导致镜像不可用或数据损坏。")]),e._v(" "),a("h3",{attrs:{id:"docker-image-import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-import"}},[e._v("#")]),e._v(" docker image import")]),e._v(" "),a("p",[a("code",[e._v("docker image import")]),e._v(" 可以将本地文件系统上的一个压缩包或文件作为 "),a("code",[e._v("Docker")]),e._v(" 镜像导入到本地镜像库中。")]),e._v(" "),a("p",[e._v("它可以将任何文件系统作为镜像导入到 "),a("code",[e._v("Docker")]),e._v(" 镜像系统中，但它不会保留任何原始的 "),a("code",[e._v("Docker")]),e._v(" 镜像元数据（例如镜像的名称，标签等）。")]),e._v(" "),a("p",[e._v("这意味着通过导入的镜像将没有名称和标签，只有一个唯一的 "),a("code",[e._v("ID")]),e._v("。")]),e._v(" "),a("p",[e._v("该命令的语法如下：")]),e._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("docker image "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("import")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("URL"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("- "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("REPOSITORY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(":TAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("其中，"),a("code",[e._v("file|URL|-")]),e._v(" 参数指定了要导入的文件或URL，"),a("code",[e._v("REPOSITORY[:TAG]")]),e._v(" 参数指定了新创建的 "),a("code",[e._v("Docker")]),e._v(" 镜像的名称和标签。")]),e._v(" "),a("p",[e._v("如果省略了该参数，则会为导入的镜像生成一个唯一的 "),a("code",[e._v("ID")]),e._v("。")]),e._v(" "),a("p",[e._v("需要注意的是，"),a("strong",[e._v("使用 "),a("code",[e._v("docker image import")]),e._v(" 导入的镜像不能像使用其他 "),a("code",[e._v("Docker")]),e._v(" 镜像一样被 "),a("code",[e._v("push")]),e._v(" 到远程仓库")]),e._v("。")]),e._v(" "),a("p",[e._v("如果需要在多个机器上使用该镜像，则需要将导入的镜像文件通过其他方式分发到这些机器上。")])])}),[],!1,null,null,null);v.default=_.exports}}]);