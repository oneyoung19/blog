(window.webpackJsonp=window.webpackJsonp||[]).push([[221],{679:function(e,s,v){"use strict";v.r(s);var _=v(40),n=Object(_.a)({},(function(){var e=this,s=e.$createElement,v=e._self._c||s;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("p",[v("code",[e._v("workspace")]),e._v(" 是包管理工具对于 "),v("code",[e._v("monorepo")]),e._v(" 的支持设计。")]),e._v(" "),v("p",[e._v("基础使用是在 "),v("code",[e._v("package.json")]),e._v(" 中声明 "),v("code",[e._v("workspaces")]),e._v("（"),v("code",[e._v("pnpm")]),e._v(" 是个例外，具体方式见后面章节）：")]),e._v(" "),v("div",{staticClass:"language-json line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-json"}},[v("code",[v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),v("span",{pre:!0,attrs:{class:"token property"}},[e._v('"workspaces"')]),v("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),v("span",{pre:!0,attrs:{class:"token string"}},[e._v('"packages/*"')]),e._v("\n  "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[e._v("1")]),v("br"),v("span",{staticClass:"line-number"},[e._v("2")]),v("br"),v("span",{staticClass:"line-number"},[e._v("3")]),v("br"),v("span",{staticClass:"line-number"},[e._v("4")]),v("br"),v("span",{staticClass:"line-number"},[e._v("5")]),v("br")])]),v("p",[e._v("在 "),v("code",[e._v("package.json")]),e._v(" 中定义了 "),v("code",[e._v("workspaces")]),e._v(" 后，利用包管理工具（"),v("code",[e._v("npm")]),e._v("、"),v("code",[e._v("yarn")]),e._v("、"),v("code",[e._v("pnpm")]),e._v("）初始化项目，会"),v("strong",[e._v("自动安装 "),v("code",[e._v("workspaces")]),e._v(" 相关依赖")]),e._v("。")]),e._v(" "),v("p",[e._v("上述 "),v("code",[e._v("workspaces")]),e._v(" 安装机制，会在 "),v("code",[e._v("node_modules")]),e._v(" 下生成 "),v("code",[e._v("workspaces")]),e._v(" 对应包的软连接 "),v("code",[e._v("symlink")]),e._v("（即"),v("strong",[e._v("符号链接")]),e._v("，在修改源码时会直接影响到依赖包）。")]),e._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),v("p",[e._v("用 "),v("code",[e._v("yarn link")]),e._v(" 同样也能生成软连接。")]),e._v(" "),v("p",[e._v("假设有 "),v("code",[e._v("project-A")]),e._v(" 和 "),v("code",[e._v("link-module")]),e._v("，那么首先在 "),v("code",[e._v("link-module")]),e._v(" 下执行 "),v("code",[e._v("yarn link")]),e._v("。"),v("strong",[e._v("执行之后，会将 "),v("code",[e._v("link-module")]),e._v(" 首先链接到全局 "),v("code",[e._v("node_modules")]),e._v(" 下")]),e._v("。")]),e._v(" "),v("p",[e._v("然后在 "),v("code",[e._v("project-A")]),e._v(" 下执行 "),v("code",[e._v("yarn link link-module")]),e._v("，"),v("strong",[e._v("会在当前工程的 "),v("code",[e._v("node_modules")]),e._v(" 下生成依赖包符号链接")]),e._v("。")]),e._v(" "),v("p",[e._v("上述步骤完成后，就可以在 "),v("code",[e._v("project-A")]),e._v(" 下引入 "),v("code",[e._v("link-module")]),e._v("。")]),e._v(" "),v("p",[e._v("需要取消软连接的话，可以使用 "),v("code",[e._v("yarn unlink")]),e._v("。")])])])}),[],!1,null,null,null);s.default=n.exports}}]);