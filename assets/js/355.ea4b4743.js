(window.webpackJsonp=window.webpackJsonp||[]).push([[355],{813:function(t,s,a){"use strict";a.r(s);var e=a(40),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_14-1-访问元素-组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-1-访问元素-组件"}},[t._v("#")]),t._v(" 14-1.访问元素 & 组件")]),t._v(" "),a("p",[t._v("在某些情况下，可以使用这些手段。")]),t._v(" "),a("p",[t._v("访问根实例，"),a("code",[t._v("$root")])]),t._v(" "),a("p",[t._v("访问父组件实例，"),a("code",[t._v("$parent")])]),t._v(" "),a("p",[t._v("访问子组件实例, "),a("code",[t._v("$refs[childComponentName]")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[a("code",[t._v("$refs")]),t._v(" 只会在组件渲染完成之后生效，并且它们不是响应式的。")]),t._v(" "),a("p",[t._v("这仅作为一个用于直接操作子组件的“逃生舱”——你应该避免在模板或计算属性中访问 "),a("code",[t._v("$refs")]),t._v("。")])]),t._v(" "),a("p",[t._v("在使用 "),a("code",[t._v("$parent")]),t._v(" 时，只能父子组件通信，如果想要更深层级的通信，"),a("code",[t._v("Vue")]),t._v(" 提供了"),a("strong",[t._v("依赖注入")]),t._v("：")]),t._v(" "),a("p",[t._v("它用到了两个新的实例选项："),a("code",[t._v("provide")]),t._v(" 和 "),a("code",[t._v("inject")]),t._v("。")]),t._v(" "),a("p",[t._v("祖先组件内：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("provide")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    getMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getMap\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("任何后代组件内：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("inject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'getMap'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"_14-2-程序化的事件侦听器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-2-程序化的事件侦听器"}},[t._v("#")]),t._v(" 14-2.程序化的事件侦听器")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("$on")]),t._v(" 监听一个事件")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("$off")]),t._v(" 停止监听一个事件")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("$once")]),t._v(" 一次性监听一个事件")])])]),t._v(" "),a("p",[t._v("在某些场景下，能够更好的管理维护自己的模块代码：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mounted")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" picker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pikaday")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    field"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$refs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("input"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    format"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YYYY-MM-DD'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$once")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hook:beforeDestroy'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    picker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[a("code",[t._v("Vue")]),t._v(" 的事件系统不同于浏览器的 "),a("code",[t._v("EventTarget API")]),t._v("。")]),t._v(" "),a("p",[t._v("尽管它们工作起来是相似的，但是 "),a("code",[t._v("$emit")]),t._v("、"),a("code",[t._v("$on")]),t._v(", 和 "),a("code",[t._v("$off")]),t._v(" 并不是 "),a("code",[t._v("dispatchEvent")]),t._v("、"),a("code",[t._v("addEventListener")]),t._v(" 和 "),a("code",[t._v("removeEventListener")]),t._v(" 的别名。")])]),t._v(" "),a("h2",{attrs:{id:"_14-3-循环引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-3-循环引用"}},[t._v("#")]),t._v(" 14-3.循环引用")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-edge-cases.html#%E9%80%92%E5%BD%92%E7%BB%84%E4%BB%B6",target:"_blank",rel:"noopener noreferrer"}},[t._v("递归组件"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("组件是可以在它们自己的模板中调用自身的。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stack-overflow'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\ntemplate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<div><stack-overflow></stack-overflow></div>'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("类似上述的组件将会导致 "),a("code",[t._v("max stack size exceeded")]),t._v(" 错误，所以请确保递归调用是条件性的 (例如使用一个最终会得到 "),a("code",[t._v("false")]),t._v(" 的 "),a("code",[t._v("v-if")]),t._v(")。")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-edge-cases.html#%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("组件之间的循环引用"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("当通过 "),a("code",[t._v("Vue.component")]),t._v(" 全局注册组件的时候，这个"),a("strong",[t._v("循环引用")]),t._v("悖论会被自动解开。")]),t._v(" "),a("p",[t._v("但如果是通过 "),a("code",[t._v("webpack")]),t._v(" 构建工具，就有可能遇见一个错误：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Failed to mount component: template or render function not defined.\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("对应的解决办法是在生命周期钩子 "),a("code",[t._v("beforeCreate")]),t._v(" 时才注册引用组件：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("beforeCreate")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("components"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TreeFolderContents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./tree-folder-contents.vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("也可以利用 "),a("code",[t._v("webpack")]),t._v(" 的异步 "),a("code",[t._v("import")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("components"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("TreeFolderContents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./tree-folder-contents.vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h2",{attrs:{id:"_14-4-模板定义的替代品"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-4-模板定义的替代品"}},[t._v("#")]),t._v(" 14-4.模板定义的替代品")]),t._v(" "),a("p",[a("code",[t._v("Vue")]),t._v(" 定义模板的推荐方式有二：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("template")]),t._v(" 选项")]),t._v(" "),a("li",[a("code",[t._v(".vue")]),t._v(" 单文件中的 "),a("code",[t._v("<template>")]),t._v(" 元素。")])]),t._v(" "),a("p",[t._v("除此以外，还有两种方式：")]),t._v(" "),a("ol",[a("li",[a("p",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-edge-cases.html#%E5%86%85%E8%81%94%E6%A8%A1%E6%9D%BF",target:"_blank",rel:"noopener noreferrer"}},[t._v("内联模板"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-edge-cases.html#X-Template",target:"_blank",rel:"noopener noreferrer"}},[t._v("X-Template"),a("OutboundLink")],1)])])]),t._v(" "),a("h2",{attrs:{id:"_14-5-控制更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_14-5-控制更新"}},[t._v("#")]),t._v(" 14-5.控制更新")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-edge-cases.html#%E5%BC%BA%E5%88%B6%E6%9B%B4%E6%96%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("强制更新"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("利用 "),a("code",[t._v("$forceUpdate")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-edge-cases.html#%E9%80%9A%E8%BF%87-v-once-%E5%88%9B%E5%BB%BA%E4%BD%8E%E5%BC%80%E9%94%80%E7%9A%84%E9%9D%99%E6%80%81%E7%BB%84%E4%BB%B6",target:"_blank",rel:"noopener noreferrer"}},[t._v("通过 "),a("code",[t._v("v-once")]),t._v(" 创建低开销的静态组件"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("渲染普通的 "),a("code",[t._v("HTML")]),t._v(" 元素在 "),a("code",[t._v("Vue")]),t._v(" 中是非常快速的，但有的时候你可能有一个组件，这个组件包含了大量静态内容。")]),t._v(" "),a("p",[t._v("在这种情况下，你可以在根元素上添加 "),a("code",[t._v("v-once")]),t._v(" "),a("code",[t._v("attribute")]),t._v(" 以确保这些内容只计算一次然后缓存起来。")])])}),[],!1,null,null,null);s.default=n.exports}}]);