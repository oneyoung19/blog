(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{494:function(v,_,e){"use strict";e.r(_);var d=e(40),t=Object(d.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("p",[v._v("在前文中，我们提到了 "),e("code",[v._v("redis.conf")]),v._v(" 这个配置文件。")]),v._v(" "),e("p",[v._v("这个文件中包含了 "),e("code",[v._v("redis")]),v._v(" 的所有配置项，"),e("strong",[v._v("我们可以根据自己的需求通过修改 "),e("code",[v._v("redis.conf")]),v._v(" 来修改这些配置项")]),v._v("。")]),v._v(" "),e("p",[v._v("另一种方式是，"),e("strong",[v._v("在连接上 "),e("code",[v._v("redis-cli")]),v._v(" 之后")]),v._v("，通过 "),e("code",[v._v("CONFIG")]),v._v(" 命令查看或设置配置项。")]),v._v(" "),e("h2",{attrs:{id:"查看配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看配置"}},[v._v("#")]),v._v(" 查看配置")]),v._v(" "),e("p",[v._v("譬如使用 "),e("code",[v._v("*")]),v._v(" 号来查看所有配置项：")]),v._v(" "),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/Not-Count-Contribution/img/20230407174511.png",alt:""}})]),v._v(" "),e("p",[v._v("如果想要查看某个配置项，可以使用 "),e("code",[v._v("CONFIG GET <config>")]),v._v(" 命令：")]),v._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[v._v("CONFIG GET loglevel\n")])]),v._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[v._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/Not-Count-Contribution/img/20230407175553.png",alt:""}})]),v._v(" "),e("h2",{attrs:{id:"设置配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置配置"}},[v._v("#")]),v._v(" 设置配置")]),v._v(" "),e("p",[v._v("如果想要设置某个配置项，可以使用 "),e("code",[v._v("CONFIG SET <config> <value>")]),v._v(" 命令：")]),v._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[v._v("CONFIG SET loglevel "),e("span",{pre:!0,attrs:{class:"token string"}},[v._v('"notice"')]),v._v("\n")])]),v._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[v._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/Not-Count-Contribution/img/20230407175754.png",alt:""}})]),v._v(" "),e("h2",{attrs:{id:"常用配置项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用配置项"}},[v._v("#")]),v._v(" 常用配置项")]),v._v(" "),e("p",[v._v("下面是一些常用的配置项：")]),v._v(" "),e("table",[e("thead",[e("tr",[e("th",[v._v("配置参数")]),v._v(" "),e("th",[v._v("默认值")]),v._v(" "),e("th",[v._v("说明")])])]),v._v(" "),e("tbody",[e("tr",[e("td",[e("code",[v._v("daemonize")])]),v._v(" "),e("td",[e("code",[v._v("no")])]),v._v(" "),e("td",[e("code",[v._v("redis-serve")]),v._v(" 启动的服务默认不是守护进程的方式。设置 "),e("code",[v._v("yes")]),v._v(" 以启动守护进程。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("pidfile")])]),v._v(" "),e("td",[e("code",[v._v("/var/run/redis.pid")])]),v._v(" "),e("td",[e("code",[v._v("Redis")]),v._v(" 默认会把 "),e("code",[v._v("pid")]),v._v(" 写入 "),e("code",[v._v("/var/run/redis.pid")]),v._v(" 文件，可以通过 "),e("code",[v._v("pidfile")]),v._v(" 指定。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("port")])]),v._v(" "),e("td",[e("code",[v._v("6379")])]),v._v(" "),e("td",[v._v("监听端口，默认端口为 "),e("code",[v._v("6379")]),v._v("。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("bind")])]),v._v(" "),e("td",[e("code",[v._v("127.0.0.1")])]),v._v(" "),e("td",[v._v("绑定的主机地址。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("timeout")])]),v._v(" "),e("td",[e("code",[v._v("300")])]),v._v(" "),e("td",[v._v("当 客户端闲置多长时间后关闭连接，如果指定为 "),e("code",[v._v("0")]),v._v("，表示关闭该功能")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("loglevel")])]),v._v(" "),e("td",[e("code",[v._v("verbose")])]),v._v(" "),e("td",[v._v("指定日志记录级别，总共支持四个级别："),e("code",[v._v("debug")]),v._v("、"),e("code",[v._v("verbose")]),v._v("、"),e("code",[v._v("notice")]),v._v("、"),e("code",[v._v("warning")]),v._v("，默认为 "),e("code",[v._v("verbose")]),v._v("。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("logfile")])]),v._v(" "),e("td",[e("code",[v._v("stdout")])]),v._v(" "),e("td",[v._v("日志记录方式，默认为标准输出。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("database")])]),v._v(" "),e("td",[e("code",[v._v("16")])]),v._v(" "),e("td",[v._v("设置数据库的数量，默认数据库为 "),e("code",[v._v("0")]),v._v("，可以使用 "),e("code",[v._v("SELECT <dbid>")]),v._v(" 命令在连接上指定数据库"),e("code",[v._v("id")]),v._v("。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("save")])]),v._v(" "),e("td",[e("code",[v._v("3600 1 300 100 60 10000")])]),v._v(" "),e("td",[e("code",[v._v("save <seconds> <changes>")]),v._v("指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("rdbcompression")])]),v._v(" "),e("td",[e("code",[v._v("yes")])]),v._v(" "),e("td",[v._v("指定存储至本地数据库时是否压缩数据，默认为 "),e("code",[v._v("yes")]),v._v("，"),e("code",[v._v("Redis")]),v._v(" 采用 "),e("code",[v._v("LZF")]),v._v(" 压缩，如果为了节省 "),e("code",[v._v("CPU")]),v._v(" 时间，可以关闭该选项，但会导致数据库文件变的巨大。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("dbfilename")])]),v._v(" "),e("td",[e("code",[v._v("dump.rdb")])]),v._v(" "),e("td",[v._v("指定本地数据库文件名，默认值为 "),e("code",[v._v("dump.rdb")])])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("dir")])]),v._v(" "),e("td",[e("code",[v._v("./")])]),v._v(" "),e("td",[v._v("指定本地数据库存放目录")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("slaveof")])]),v._v(" "),e("td",[e("code",[v._v("''")])]),v._v(" "),e("td",[e("code",[v._v("slaveof <masterip> <masterport>")]),v._v(" 设置当本机为 "),e("code",[v._v("slav")]),v._v(" 服务时，设置 "),e("code",[v._v("master")]),v._v(" 服务的 "),e("code",[v._v("IP")]),v._v(" 地址及端口，在 "),e("code",[v._v("Redis")]),v._v(" 启动时，它会自动从 "),e("code",[v._v("master")]),v._v(" 进行数据同步")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("masterauth")])]),v._v(" "),e("td",[e("code",[v._v("''")])]),v._v(" "),e("td",[e("code",[v._v("masterauth <master-password>")]),v._v(" 当 "),e("code",[v._v("master")]),v._v(" 服务设置了密码保护时，"),e("code",[v._v("slav")]),v._v(" 服务连接 "),e("code",[v._v("master")]),v._v(" 的密码")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("requirepass")])]),v._v(" "),e("td",[e("code",[v._v("''")])]),v._v(" "),e("td",[v._v("设置 "),e("code",[v._v("Redis")]),v._v(" 连接密码，如果配置了连接密码，客户端在连接 "),e("code",[v._v("Redis")]),v._v(" 时需要通过"),e("code",[v._v("AUTH <password>")]),v._v(" 命令提供密码，默认关闭。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("maxclients")])]),v._v(" "),e("td",[e("code",[v._v("128")])]),v._v(" "),e("td",[v._v("设置同一时间最大客户端连接数，默认无限制，"),e("code",[v._v("Redis")]),v._v(" 可以同时打开的客户端连接数为 "),e("code",[v._v("Redis")]),v._v(" 进程可以打开的最大文件描述符数，如果设置 "),e("code",[v._v("maxclients 0")]),v._v("，表示不作限制。当客户端连接数到达限制时，"),e("code",[v._v("Redis")]),v._v(" 会关闭新的连接并向客户端返回 "),e("code",[v._v("max number of clients reached")]),v._v(" 错误信息。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("maxmemory")])]),v._v(" "),e("td",[e("code",[v._v("0")])]),v._v(" "),e("td",[v._v("指定 "),e("code",[v._v("Redis")]),v._v(" 最大内存限制，"),e("code",[v._v("Redis")]),v._v(" 在启动时会把数据加载到内存中，达到最大内存后，"),e("code",[v._v("Redis")]),v._v(" 会先尝试清除已到期或即将到期的 "),e("code",[v._v("Key")]),v._v("，当此方法处理 后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。"),e("code",[v._v("Redis")]),v._v(" 新的 "),e("code",[v._v("vm")]),v._v(" 机制，会把 "),e("code",[v._v("Key")]),v._v(" 存放内存，"),e("code",[v._v("Value")]),v._v(" 会存放在 "),e("code",[v._v("swap")]),v._v(" 区。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("appendonly")])]),v._v(" "),e("td",[e("code",[v._v("no")])]),v._v(" "),e("td",[v._v("指定是否在每次更新操作后进行日志记录，"),e("code",[v._v("Redis")]),v._v(" 在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为 "),e("code",[v._v("redis")]),v._v(" 本身同步数据文件是按上面 "),e("code",[v._v("save")]),v._v(" 条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为 "),e("code",[v._v("no")]),v._v("。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("appendfilename")])]),v._v(" "),e("td",[e("code",[v._v("appendonly.aof")])]),v._v(" "),e("td",[v._v("指定更新日志文件名，默认为 "),e("code",[v._v("appendonly.aof")]),v._v("。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("appendfsync")])]),v._v(" "),e("td",[e("code",[v._v("everysec")])]),v._v(" "),e("td",[v._v("指定更新日志条件，共有3个可选值："),e("br"),v._v(" "),e("code",[v._v("no")]),v._v("：表示等操作系统进行数据缓存同步到磁盘（快）  "),e("br"),v._v(" "),e("code",[v._v("always")]),v._v("：表示每次更新操作后手动调用 "),e("code",[v._v("fsync()")]),v._v(" 将数据写到磁盘（慢，安全） "),e("br"),v._v(" "),e("code",[v._v("everysec")]),v._v("：表示每秒同步一次（折中，默认值）")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("vm-enabled")])]),v._v(" "),e("td",[e("code",[v._v("no")])]),v._v(" "),e("td",[v._v("指定是否启用虚拟内存机制。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("vm-swap-file")])]),v._v(" "),e("td",[e("code",[v._v("/tmp/redis.swap")])]),v._v(" "),e("td",[v._v("虚拟内存文件路径。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("vm-max-memory")])]),v._v(" "),e("td",[e("code",[v._v("0")])]),v._v(" "),e("td",[v._v("当 "),e("code",[v._v("vm-max-memory")]),v._v(" 设置为 "),e("code",[v._v("0")]),v._v(" 的时候，所有 "),e("code",[v._v("value")]),v._v(" 都存在于磁盘。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("vm-page-size")])]),v._v(" "),e("td",[e("code",[v._v("32")])]),v._v(" "),e("td",[e("code",[v._v("Redis swap")]),v._v(" 文件分成了很多的 "),e("code",[v._v("page")]),v._v("，"),e("code",[v._v("vm-page-size")]),v._v(" 是要根据存储的数据大小来设定的。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("vm-pages")])]),v._v(" "),e("td",[e("code",[v._v("134217728")])]),v._v(" "),e("td",[v._v("设置 "),e("code",[v._v("swap")]),v._v(" 文件中的 "),e("code",[v._v("page")]),v._v(" 数量，由于页表（一种表示页面空闲或使用的 "),e("code",[v._v("bitmap")]),v._v("）是在放在内存中的，，在磁盘上每 "),e("code",[v._v("8")]),v._v(" 个 "),e("code",[v._v("pages")]),v._v(" 将消耗 "),e("code",[v._v("1byte")]),v._v(" 的内存。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("vm-max-threads")])]),v._v(" "),e("td",[e("code",[v._v("4")])]),v._v(" "),e("td",[v._v("设置访问 "),e("code",[v._v("swap")]),v._v(" 文件的线程数，最好不要超过机器的核数，如果设置为 "),e("code",[v._v("0")]),v._v("，那么所有对 "),e("code",[v._v("swap")]),v._v(" 文件的操作都是串行的，可能会造成比较长时间的延迟。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("glueoutputbuf")])]),v._v(" "),e("td",[e("code",[v._v("yes")])]),v._v(" "),e("td",[v._v("设置在向客户端应答时，是否把较小的包合并为一个包发送。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("hash-max-zipmap-entries")])]),v._v(" "),e("td",[e("code",[v._v("64")])]),v._v(" "),e("td",[v._v("指定在超过一定的数量超过某一临界值时，采用一种特殊的哈希算法。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("hash-max-zipmap-value")])]),v._v(" "),e("td",[e("code",[v._v("512")])]),v._v(" "),e("td",[v._v("指定在超过最大的元素超过某一临界值时，采用一种特殊的哈希算法。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("activerehashing")])]),v._v(" "),e("td",[e("code",[v._v("yes")])]),v._v(" "),e("td",[v._v("指定是否激活重置哈希。")])]),v._v(" "),e("tr",[e("td",[e("code",[v._v("include")])]),v._v(" "),e("td",[e("code",[v._v("/path/to/local.conf")])]),v._v(" "),e("td",[v._v("指定包含其它的配置文件，可以在同一主机上多个 "),e("code",[v._v("Redis")]),v._v(" 实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件。")])])])])])}),[],!1,null,null,null);_.default=t.exports}}]);