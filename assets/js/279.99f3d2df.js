(window.webpackJsonp=window.webpackJsonp||[]).push([[279],{737:function(s,t,a){"use strict";a.r(t);var n=a(40),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("code",[s._v("output")]),s._v(" 用来配置 "),a("code",[s._v("webpack")]),s._v(" 输出相关的内容。")]),s._v(" "),a("h2",{attrs:{id:"_1-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-path"}},[s._v("#")]),s._v(" 1.path")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("code",[s._v("output.path")]),s._v(" 用来配置文件输出到哪个目录里。一般都是会配置成项目根目录下的 "),a("code",[s._v("dist")]),s._v(" 文件夹。")]),s._v(" "),a("h2",{attrs:{id:"_2-filename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-filename"}},[s._v("#")]),s._v(" 2.filename")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name].[hash:6].js'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("code",[s._v("output.filename")]),s._v(" 用来配置输出文件的文件名。由于即使单页面应用，最终输出也可能是多个 "),a("code",[s._v("js")]),s._v(" 文件（由于异步 "),a("code",[s._v("chunk")]),s._v(" 或者公共 "),a("code",[s._v("chunk")]),s._v(" 的存在）。")]),s._v(" "),a("p",[s._v("为了代码更好的组织，通常可以将这些 "),a("code",[s._v("js")]),s._v(" 文件统一放到 "),a("code",[s._v("js")]),s._v(" 目录下。代码如下：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 注意 不要把path改成path.resolve(__dirname, '../dist/js') 这会导致输出目录变成'dist/js' 项目分离的图片和css等也会放在'dist/js'目录下了")]),s._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// filename加上'js/'就可以")]),s._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'js/[name].[hash:6].js'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("下面说下"),a("code",[s._v("[name].[hash:6].js")]),s._v("的含义：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("name")]),s._v(":输出文件的"),a("code",[s._v("name")]),s._v("，默认是"),a("code",[s._v("main")]),s._v("，可以在"),a("code",[s._v("entry")]),s._v("的对象形式中指定，而字符串和数组形式则采用默认的"),a("code",[s._v("main")]),s._v("名。譬如：")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// output => main.872e20.js")]),s._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../src/start.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// output => main.872e20.js")]),s._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../src/start.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../src/entry.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// output => start.872e20.js  entry.872e20.js")]),s._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    start"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../src/start.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../src/entry.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("ul",[a("li",[a("p",[a("code",[s._v("hash:6")]),s._v(":"),a("code",[s._v("hash")]),s._v("会让"),a("code",[s._v("webpack")]),s._v("使用"),a("code",[s._v("hash")]),s._v("值，另外还可替换成"),a("code",[s._v("chunkhash")]),s._v("或者"),a("code",[s._v("contenthash")]),s._v("。"),a("code",[s._v("6")]),s._v("代表只取6位哈希值。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("js")]),s._v(": 因为输出文件都是 "),a("code",[s._v("js")]),s._v(" 文件，所以直接配置成 "),a("code",[s._v("js")]),s._v(" 即可。如果文件后缀名称不确定，也可以使用"),a("code",[s._v("[ext]")]),s._v("占位。")])])]),s._v(" "),a("h2",{attrs:{id:"_3-chunkfilename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-chunkfilename"}},[s._v("#")]),s._v(" 3.chunkFilename")]),s._v(" "),a("p",[a("code",[s._v("chunkFilename")]),s._v("可以用来定义"),a("code",[s._v("webpack")]),s._v("打包过程中公共"),a("code",[s._v("chunk")]),s._v("或者异步"),a("code",[s._v("chunk")]),s._v("的输出文件名。")]),s._v(" "),a("p",[a("code",[s._v("webpack")]),s._v("当中有个术语，叫做"),a("code",[s._v("Code Spliting")]),s._v("。主要目的是将打包后的文件，譬如"),a("code",[s._v("main.js")]),s._v("，依据一定的规则（公共"),a("code",[s._v("chunk")]),s._v("或异步"),a("code",[s._v("chunk")]),s._v("）拆分成多个文件。这样有助于浏览器中的资源缓存，降低服务器压力，提升网站性能。")]),s._v(" "),a("p",[s._v("实现上述功能，旧版本"),a("code",[s._v("webpack")]),s._v("使用的是"),a("code",[s._v("CommonsChunkPlugin")]),s._v("。而"),a("code",[s._v("webpack4.0")]),s._v("使用的是"),a("code",[s._v("SplitChunksPlugin")]),s._v("。所幸的是，"),a("code",[s._v("webpack")]),s._v("已经内置了"),a("code",[s._v("SplitChunksPlugin")]),s._v("插件，无需我们再进行安装。我们只需要在"),a("code",[s._v("optimization.splitChunks")]),s._v("下配置规则即可。更加详细的介绍可见性能优化部分。")]),s._v(" "),a("h2",{attrs:{id:"ps-hash-vs-chunkhash-vs-contenthash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ps-hash-vs-chunkhash-vs-contenthash"}},[s._v("#")]),s._v(" ps. hash vs chunkhash vs contenthash")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("hash")]),s._v(" 与整个项目的构建有关。只要项目的文件更改，"),a("code",[s._v("hash")]),s._v(" 就会改变。")]),s._v(" "),a("li",[a("code",[s._v("chunkhash")]),s._v(" 与 "),a("code",[s._v("webpack")]),s._v(" 打包的 "),a("code",[s._v("chunk")]),s._v(" 有关。只有当前 "),a("code",[s._v("chunk")]),s._v(" 发生了改变，"),a("code",[s._v("chunkhash")]),s._v(" 才会改变。")]),s._v(" "),a("li",[a("code",[s._v("contenthash")]),s._v(" 与文件本身内容有关。只有该文件的内容发生改变，"),a("code",[s._v("contenthash")]),s._v(" 才会改变。")])]),s._v(" "),a("p",[s._v("之所以要有这3种哈希值，主要目的还是"),a("strong",[s._v("为了静态资源的缓存，提升网站性能")]),s._v("。当浏览器发现文件名改变时，才会重新发起网络请求，否则都会直接去取浏览器缓存。")]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("webpack")]),s._v(" 的实际构建中，很少直接使用 "),a("code",[s._v("hash")]),s._v("。因为 "),a("code",[s._v("hash")]),s._v(" 会根据每次工程的内容进行计算，很容易造成不必要的 "),a("code",[s._v("hash")]),s._v(" 变更，不利于版本管理。以下面的代码来说明其他两种哈希值的使用场景。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../src/main.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 针对于输出文件，我们使用chunkhash")]),s._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'js/[name].[chunkhash:6].js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    chunkFilename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'js/[name].[chunkhash:6].js'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  module"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        test"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.jpe?g|png|gif$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        use"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'url-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 此hash不是我们讨论的三种哈希中的hash 它是loader自带的hash定义 会根据文件内容来生成")]),s._v("\n            name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'image/[name].[hash:6].[ext]'")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对于css文件来说，一般会使用MiniCssExtractPlugin将其抽取为一个单独的css文件。此时可以使用contenthash进行标记，确保css文件内容变化时，可以更新hash。")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MiniCssExtractPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css/[name].[contenthash:6].css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      chunkFilename"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css/[name].[contenthash:6].css'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("p",[s._v("值得注意的是，上面代码中的 "),a("code",[s._v("loader")]),s._v(" 使用了 "),a("code",[s._v("hash")]),s._v(" 来配置文件名。但是此哈希并不是我们说的 "),a("code",[s._v("hash")]),s._v("。")]),s._v(" "),a("p",[a("code",[s._v("file-loader")]),s._v(" 或者 "),a("code",[s._v("url-loader")]),s._v("的 "),a("code",[s._v("hash")]),s._v(" 字段，它是该 "),a("code",[s._v("loader")]),s._v(" 自己定义的占位符，和 "),a("code",[s._v("webpack")]),s._v(" 的内置 "),a("code",[s._v("hash")]),s._v(" 字段并不一致。"),a("code",[s._v("loader")]),s._v(" 里的 "),a("code",[s._v("hash")]),s._v(" 是使用 "),a("code",[s._v("md4")]),s._v(" 等 "),a("code",[s._v("hash")]),s._v(" 算法，对文件内容进行 "),a("code",[s._v("hash")]),s._v("。所以只要文件内容不变，"),a("code",[s._v("hash")]),s._v(" 还是会保持一致。")]),s._v(" "),a("p",[s._v("相关参考链接："),a("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1642029",target:"_blank",rel:"noopener noreferrer"}},[s._v("黄腾霄的博客"),a("OutboundLink")],1),s._v("与"),a("a",{attrs:{href:"https://zh.bccrwp.org/compare/hash-vs-chunkhash-vs-contenthash-4823e6/",target:"_blank",rel:"noopener noreferrer"}},[s._v("zh.bccrwp.org"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"_4-publicpath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-publicpath"}},[s._v("#")]),s._v(" 4.publicPath")]),s._v(" "),a("p",[a("code",[s._v("output")]),s._v(" 中的 "),a("code",[s._v("publicPath")]),s._v(" 指定了在部署时静态资源的引用位置。默认值是空字符串"),a("code",[s._v("''")]),s._v("。"),a("strong",[s._v("不过大多数封装的脚手架都会默认设置为"),a("code",[s._v("/")])]),s._v("。")]),s._v(" "),a("p",[s._v("说一个例子，来解释下不同之处。譬如现在要将打包好的 "),a("code",[s._v("dist")]),s._v(" 部署到 "),a("code",[s._v("jsgoshu.cn/demo/")]),s._v(" 这个地址下。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("publicPath: '/'")]),s._v("。这个设置打包出来的资源路径是这样的："),a("code",[s._v("/static/js/demo.js")]),s._v("。实际的访问路径是："),a("code",[s._v("jsgoshu.cn/static/js/demo.js")]),s._v("。\n很明显，资源是访问不到的，会报"),a("code",[s._v("404")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("publicPath: '/demo/'")]),s._v("。这种方式可以解决上面 "),a("code",[s._v("404")]),s._v(" 的问题，因为实际的访问路径会是 "),a("code",[s._v("jsgoshu.cn/demo/static/js/demo.js")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("publicPath: ''")]),s._v("。这种方式会是相对路径。打包的资源路径是 "),a("code",[s._v("static/js/demo.js")]),s._v("。部署到服务器后，访问路径是 "),a("code",[s._v("jsgoshu.cn/demo/static/js/demo.js")]),s._v("。"),a("code",[s._v("publicPath: './'")]),s._v(" 与 "),a("code",[s._v("publicPath: ''")]),s._v(" 效果一致。")])])]),s._v(" "),a("p",[s._v("总结下，"),a("code",[s._v("publicPath: ''")]),s._v("是百搭的，无需纠结项目具体要部署到"),a("strong",[s._v("根目录")]),s._v("还是"),a("strong",[s._v("子级目录")]),s._v("。"),a("code",[s._v("publicPath: '/'")]),s._v(" 可以将项目部署到"),a("strong",[s._v("根目录")]),s._v("。"),a("code",[s._v("publicPath: '/demo/'")]),s._v("等类似配置则是可以将项目部署到"),a("strong",[s._v("对应的子级目录")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"_5-crossoriginloading"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-crossoriginloading"}},[s._v("#")]),s._v(" 5.crossOriginLoading")]),s._v(" "),a("p",[a("code",[s._v("crossOriginLoading")]),s._v("是跟异步"),a("code",[s._v("chunk")]),s._v("相关的内容。异步 "),a("code",[s._v("chunk")]),s._v(" 的原理是使用了 "),a("code",[s._v("JSONP")]),s._v("。而 "),a("code",[s._v("crossOriginLoading")]),s._v(" 则是用来配置相应的"),a("code",[s._v("script")]),s._v(" 标签上是否需要有 "),a("code",[s._v("crossorigin")]),s._v(" 属性。可设置的值如下：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("'anonymous'")]),s._v(": "),a("strong",[s._v("不带凭据(credential)")]),s._v(" 启用跨域加载。")]),s._v(" "),a("li",[a("code",[s._v("'use-credential'")]),s._v(": "),a("strong",[s._v("携带凭据(credential)")]),s._v(" 启用跨域加载。")])]),s._v(" "),a("p",[s._v("最后简单介绍下"),a("code",[s._v("crossorigin")]),s._v("属性，它主要是为了给某些 "),a("code",[s._v("html")]),s._v(" 标签无限制加载其他资源提供验证功能，譬如我们都知道 "),a("code",[s._v("script")]),s._v(" 与 "),a("code",[s._v("img")]),s._v(" 标签加载跨域资源是不受限制的，但某些场景会受到浏览器的限制，这就需要提供 "),a("code",[s._v("CORS")]),s._v(" 的验证机制以验证资源本身是允许跨域的。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("script")]),s._v(": 如果 "),a("code",[s._v("script")]),s._v(" 标签加载的 "),a("code",[s._v("js")]),s._v(" 资源是跨域，那么当加载的 "),a("code",[s._v("js")]),s._v(" 文件有报错时，浏览器是不会明确提示你具体的报错信息。除非在 "),a("code",[s._v("script")]),s._v("标签上加上 "),a("code",[s._v("crossorigin")]),s._v("，而且 "),a("code",[s._v("js")]),s._v(" 文件确实配置了 "),a("code",[s._v("Allow-Control-Access-Origin")]),s._v(" 等 "),a("code",[s._v("CORS")]),s._v(" 验证。")]),s._v(" "),a("li",[a("code",[s._v("img")]),s._v(": "),a("code",[s._v("img")]),s._v(" 标签也能加载跨域图片（当然是没做防盗链的图片）。但是假如使用 "),a("code",[s._v("canvas")]),s._v(" 绘制跨域图片时，如果使用 "),a("code",[s._v("toBlob")]),s._v(" 或者 "),a("code",[s._v("toDataURL")]),s._v("，就会失败。解决办法同上。更详细的内容可以看我这篇"),a("RouterLink",{attrs:{to:"/FE/HTML5/5.graphic.html#_8-绘制图片image"}},[s._v("文章")])],1)]),s._v(" "),a("h2",{attrs:{id:"_6-library"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-library"}},[s._v("#")]),s._v(" 6.library")]),s._v(" "),a("p",[s._v("如果你想要把输出文件作为 "),a("code",[s._v("npm")]),s._v(" 包发布，那么就可以用该配置项来确定输出文件的"),a("strong",[s._v("导出值")]),s._v("。")]),s._v(" "),a("p",[s._v("假设 "),a("code",[s._v("output")]),s._v(" 的 "),a("code",[s._v("library")]),s._v(" 设置为 "),a("code",[s._v("myLibrary")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    library"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'myLibrary'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("在入口文件 "),a("code",[s._v("main.js")]),s._v(" 中使用了下边的语法导出：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  alpha"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export default--message'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" beta "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export--message'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("由于 "),a("code",[s._v("libraryTarget")]),s._v(" 的默认值为 "),a("code",[s._v("var")]),s._v("，变量 "),a("code",[s._v("myLibrary")]),s._v(" 会暴露在全局。所以利用 "),a("code",[s._v("script")]),s._v(" 标签加载，打印下"),a("code",[s._v("myLibrary")]),s._v("，结果如下：\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/main/img/0081Kckwly1gkq7dlr6c6j32kc08q40o.jpg",alt:""}})]),s._v(" "),a("p",[s._v("如果入口文件 "),a("code",[s._v("main.js")]),s._v(" 没有返回值，即 "),a("code",[s._v("_entry_return_")]),s._v(" 为 "),a("code",[s._v("undefined")]),s._v("，同样打印下 "),a("code",[s._v("myLibrary")]),s._v("，结果如下：\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/main/img/0081Kckwly1gkq7fvc7xqj32ka040jsg.jpg",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"_7-libraryexport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-libraryexport"}},[s._v("#")]),s._v(" 7.libraryExport")]),s._v(" "),a("p",[s._v("根据上例，可以看到原始导出下的 "),a("code",[s._v("_entry_return_")]),s._v(" 的数据结构不够友好。")]),s._v(" "),a("p",[s._v("在使用的时候还需要利用对象结构寻找实际要的属性。那么 "),a("code",[s._v("libraryTarget")]),s._v(" 可以用来解决这个问题的。")]),s._v(" "),a("p",[s._v("默认值为"),a("code",[s._v("_entry_return_")]),s._v("（符合上例）。根据设置的值不同，其实际导出的值也会有所区别。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("libraryExport: default")]),s._v(": "),a("code",[s._v("_entry_return_.default")]),s._v("。会是上例中的"),a("code",[s._v('{ alpha: "export default--message" }')]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("libraryExport: beta")]),s._v(": "),a("code",[s._v("_entry_return_.beta")]),s._v("。会是上例中的"),a("code",[s._v("export--message")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("libraryExport: ['MyModule', 'MySubModule']")]),s._v(": "),a("code",[s._v("_entry_return_.MyModule")]),s._v(" 及 "),a("code",[s._v("_entry_return_.MySubModule")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[a("strong",[a("code",[s._v("libraryExport")]),s._v(" 的默认设置是 "),a("code",[s._v("undefined")]),s._v("，在这种情况下，会兼容 "),a("code",[s._v("export default")]),s._v(" 与 "),a("code",[s._v("export")]),s._v(" 两种语法")]),s._v("。")]),s._v(" "),a("p",[s._v("因此，在实际使用过程中，可以根据仓库目的，选择不同的 "),a("code",[s._v("libraryExport")]),s._v(" 配置。")])]),s._v(" "),a("h2",{attrs:{id:"_8-librarytarget"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-librarytarget"}},[s._v("#")]),s._v(" 8.libraryTarget")]),s._v(" "),a("p",[s._v("配置如何暴露 "),a("code",[s._v("library")]),s._v("。假设 "),a("code",[s._v("library")]),s._v(" 设置为 "),a("code",[s._v("myLibrary")]),s._v("，常用可配置值及其对应作用如下：")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("var")]),s._v(": 默认值。会将 "),a("code",[s._v("myLibrary")]),s._v(" 设置为全局变量，"),a("strong",[s._v("浏览器环境下")]),s._v("可利用 "),a("code",[s._v("script")]),s._v(" 标签引入使用。也可在 "),a("code",[s._v("node")]),s._v(" 环境下使用。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("window")]),s._v(": 将 "),a("code",[s._v("myLibrary")]),s._v(" 分配给全局 "),a("code",[s._v("window")]),s._v(" 下。"),a("code",[s._v("window.myLibrary")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("this")]),s._v(": 将 "),a("code",[s._v("myLibrary")]),s._v(" 分配给实际执行时的 "),a("code",[s._v("this")]),s._v("。例如 "),a("code",[s._v("AMD")]),s._v(" 模块化、"),a("code",[s._v("CMD")]),s._v(" 模块化或者 "),a("code",[s._v("node")]),s._v(" 环境下，"),a("code",[s._v("this")]),s._v(" 不一定是 "),a("code",[s._v("window")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("global")]),s._v(": 将 "),a("code",[s._v("myLibrary")]),s._v(" 分配给全局 "),a("code",[s._v("global")]),s._v(" 下。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("commonjs")]),s._v(": "),a("code",[s._v("commonJs 1.0")]),s._v("版本的规范。"),a("code",[s._v('exports["myLibrary"] = _entry_return_')]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("commonjs2")]),s._v(": "),a("code",[s._v("commonJs 2.0")]),s._v("版本的规范。"),a("code",[s._v("module.exports = _entry_return_")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("amd")]),s._v(": "),a("code",[s._v("AMD")]),s._v(" 模块化规范。需要 "),a("code",[s._v("require.js")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 声明")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myLibrary"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" _entry_return_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 此模块返回值，是入口 chunk 返回的值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'myLibrary'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("MyLibrary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用 library 做一些事……")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("umd")]),s._v(": 将 "),a("code",[s._v("myLibrary")]),s._v(" 暴露为所有的模块定义下都可运行的方式。它将在 "),a("code",[s._v("CommonJS")]),s._v("、 "),a("code",[s._v("AMD")]),s._v(" 环境下运行，或将模块导出到 "),a("code",[s._v("global")]),s._v(" 下的变量。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("webpackUniversalModuleDefinition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" factory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'object'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'object'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("factory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" define "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'function'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" define"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("amd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" factory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'object'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myLibrary"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("factory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myLibrary"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("factory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" self "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'undefined'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" self "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" _entry_return_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 此模块返回值，是入口 chunk 返回的值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);