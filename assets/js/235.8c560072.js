(window.webpackJsonp=window.webpackJsonp||[]).push([[235],{693:function(e,v,t){"use strict";t.r(v);var _=t(40),a=Object(_.a)({},(function(){var e=this,v=e.$createElement,t=e._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[t("code",[e._v("conventional-changelog")]),e._v(" 是一个根据 "),t("code",[e._v("Git")]),e._v(" 记录自动生成 "),t("code",[e._v("changelog")]),e._v(" 的工具。")]),e._v(" "),t("p",[e._v("笔者初次是在尤大写的"),t("a",{attrs:{href:"https://www.npmjs.com/package/register-service-worker",target:"_blank",rel:"noopener noreferrer"}},[e._v("register-service-worker"),t("OutboundLink")],1),e._v("库中接触到该工具。")]),e._v(" "),t("p",[e._v("本文以 "),t("a",{attrs:{href:"https://www.npmjs.com/package/conventional-changelog-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("conventional-changelog-cli@^4.1.0"),t("OutboundLink")],1),e._v(" 版本为例。")]),e._v(" "),t("h2",{attrs:{id:"_1-使用步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用步骤"}},[e._v("#")]),e._v(" 1.使用步骤")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("安装 "),t("code",[e._v("conventional-changelog-cli@^4.1.0")])])]),e._v(" "),t("li",[t("p",[e._v("定义 "),t("code",[e._v("scripts")])])])]),e._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"prepublishOnly"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"conventional-changelog -p angular -i CHANGELOG.md -s"')]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("执行 "),t("code",[e._v("npm run prepublishOnly")]),e._v(" 就会写入 "),t("code",[e._v("changelog")]),e._v(" 日志")])]),e._v(" "),t("h2",{attrs:{id:"_2-参数详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-参数详解"}},[e._v("#")]),e._v(" 2.参数详解")]),e._v(" "),t("p",[t("code",[e._v("conventional-changelog -p angular -i CHANGELOG.md -s")]),e._v(" 命令会读取 "),t("code",[e._v("package.json")]),e._v(" 中的版本，"),t("strong",[e._v("根据 "),t("code",[e._v("angular")]),e._v(" 规范")]),e._v("，将截止到上一次 "),t("code",[e._v("tag")]),e._v(" 的所有 "),t("code",[e._v("commit")]),e._v(" 输入到指定文件中。")]),e._v(" "),t("p",[e._v("其中：")]),e._v(" "),t("ul",[t("li",[t("p",[t("code",[e._v("-p")]),e._v(" 代表 "),t("code",[e._v("preset")]),e._v("，即使用 "),t("code",[e._v("angular commit")]),e._v(" 规范。")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("-i")]),e._v(" 代表 "),t("code",[e._v("infile")]),e._v("，即从 "),t("code",[e._v("CHANGELOG.md")]),e._v(" 文件中读取日志。")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("-s")]),e._v(" 代表 "),t("code",[e._v("same-file")]),e._v("，即输出文件也是 "),t("code",[e._v("CHANGELOG.md")]),e._v("。")])])]),e._v(" "),t("p",[e._v("假设项目的 "),t("code",[e._v("git")]),e._v(" 操作树为 "),t("code",[e._v("tag1 => tag2 => tag3 => commits")]),e._v("，")]),e._v(" "),t("p",[e._v("执行 "),t("code",[e._v("prepublishOnly")]),e._v(" 后，会读取 "),t("code",[e._v("package.json")]),e._v(" 版本，根据 "),t("code",[e._v("angular")]),e._v(" 规范将 "),t("code",[e._v("commits")]),e._v(" 输出到指定文件中。")]),e._v(" "),t("p",[e._v("此外，还可以设置一个参数：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("-r")]),e._v(" 代表 "),t("code",[e._v("release-count")]),e._v("，默认是 "),t("code",[e._v("1")]),e._v("，因此读取上例中的 "),t("code",[e._v("commits")]),e._v("；如果设置为 "),t("code",[e._v("2")]),e._v("，则会读取 "),t("code",[e._v("tag3")]),e._v(" 和 "),t("code",[e._v("commits")]),e._v("；以此类推。")])]),e._v(" "),t("p",[e._v("如果 "),t("code",[e._v("-r")]),e._v(" 设置为 "),t("code",[e._v("0")]),e._v("，则会读取所有日志，即本例中的 "),t("code",[e._v("tag1 tag2 tag3 commits")]),e._v("。")])])}),[],!1,null,null,null);v.default=a.exports}}]);