(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{483:function(s,t,a){"use strict";a.r(t);var n=a(40),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("前端偏向于"),a("strong",[s._v("视觉交互")]),s._v("，后端偏向于"),a("strong",[s._v("数据逻辑")]),s._v("，因此在联调过程中，前后端研发看待需求的角度是不同的。")]),s._v(" "),a("p",[s._v("但前后端的开发，都必须基于项目需求。")]),s._v(" "),a("p",[s._v("由于"),a("strong",[s._v("沟通成本")]),s._v("和"),a("strong",[s._v("人员理解不一致")]),s._v("甚至"),a("strong",[s._v("接口不满足需求实现")]),s._v("的影响，前后端联调的效率也是目前项目提测的瓶颈。")]),s._v(" "),a("p",[s._v("另外，在某种程度上，接口质量是前端代码质量的瓶颈。接口的质量，直接影响前端代码中是否需要做大量的容错处理。")]),s._v(" "),a("p",[s._v("因此，前后端联调的过程中，需要有一套规范，来保证前后端的开发效率。")]),s._v(" "),a("h2",{attrs:{id:"_1-代码风格"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-代码风格"}},[s._v("#")]),s._v(" 1.代码风格")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("变量名尽量使用名词，方法名尽量使用动词，英文单词使用驼峰命名法。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("GET")]),s._v(" 请求使用 "),a("code",[s._v("url")]),s._v(" 中的 "),a("code",[s._v("querystring")]),s._v("，无 "),a("code",[s._v("Content-Type")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("POST")]),s._v(" 请求的 "),a("code",[s._v("Content-Type")]),s._v(" 使用 "),a("code",[s._v("application/json")]),s._v("，不推荐使用 "),a("code",[s._v("application/x-www-form-urlencoded")]),s._v("。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("FILE")]),s._v(" 文件上传 "),a("code",[s._v("Content-Type")]),s._v(" 使用 "),a("code",[s._v("multipart/form-data")]),s._v("。")])])]),s._v(" "),a("h2",{attrs:{id:"_2-接口定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-接口定义"}},[s._v("#")]),s._v(" 2.接口定义")]),s._v(" "),a("ol",[a("li",[s._v("接口定义必须提供 "),a("code",[s._v("swagger")]),s._v(" 等文档。")]),s._v(" "),a("li",[s._v("接口地址是以"),a("strong",[s._v("网关地址")]),s._v("为参照。")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Good ✅")]),s._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sit1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gateway"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sitcbi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("customer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("swagger#"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Bad ❌")]),s._v("\nhttp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dev1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("boss"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("devcbi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("swagger#"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("这样的话，就能直接使用 "),a("code",[s._v("/xxx-customer")]),s._v(" 代理到 "),a("code",[s._v("http://sit1.xxx-gateway.sitcbi.com")]),s._v("。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("跨域处理，联调阶段采用 "),a("code",[s._v("webpack-dev-server")]),s._v(" 作本地代理，部署阶段均采用 "),a("code",[s._v("nginx")]),s._v(" 反向代理。")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("接口需要清楚定义"),a("strong",[s._v("入参")]),s._v("和"),a("strong",[s._v("出参")]),s._v("，且划分详细。"),a("strong",[s._v("没有多余字段")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("接口文档针对入参和出参的每个字段，都要有对应的中文说明。"),a("strong",[s._v("且中文说明应与原型字段名称保持一致")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("出参需要明确定义"),a("strong",[s._v("默认值")]),s._v("。对象类型的返回空对象 "),a("code",[s._v("{}")]),s._v(", 数组类型的返回空数组 "),a("code",[s._v("[]")]),s._v("，字符串类型的返回空字符串 "),a("code",[s._v('""')]),s._v("， "),a("code",[s._v("Number")]),s._v(" 和"),a("code",[s._v("Boolean")]),s._v(" 类型的返回 "),a("code",[s._v("null")]),s._v("。")])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Good ✅")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"msg"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"success"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Bad ❌")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"msg"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"success"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"_3-业务对接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-业务对接"}},[s._v("#")]),s._v(" 3.业务对接")]),s._v(" "),a("p",[a("strong",[s._v("前端专注客户交互，后端专注业务数据。")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("业务状态、国家列表、国码列表等"),a("strong",[s._v("枚举")]),s._v("在大多数场景下都应该提供接口。"),a("strong",[s._v("前端不在项目写死固定值")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("查询一类的接口，如果涉及到枚举，接口要返回对应字段，前端不做映射处理。譬如：")])])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cstNo"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"amount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"status"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OPENING"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"statusName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"开通中"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"statusNameEn"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Opening"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("查询一类的接口，如果查"),a("strong",[s._v("全部")]),s._v("数据，推荐传递空字符串，而非删除入参。譬如：")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Good ✅")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  startDate"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2023-05-01'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  endDate"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2023-05-31'")]),s._v("\n  status"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  pageNo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  pageSize"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Bad ❌")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  startDate"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2023-05-01'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  endDate"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2023-05-31'")]),s._v("\n  pageNo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  pageSize"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("对于有中英文切换等需求，接口要支持中英文。")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("目前项目会以请求头中的 "),a("code",[s._v("accept-language")]),s._v(" 为准，返回对应语言的 "),a("code",[s._v("error")]),s._v(" 报错信息或 "),a("code",[s._v("info")]),s._v(" 提示信息。")])]),s._v(" "),a("li",[a("p",[s._v("枚举一类的接口，同时返回 "),a("code",[s._v("showName")]),s._v(" 和 "),a("code",[s._v("showNameEn")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("查询一类的接口，也要返回对应的 "),a("code",[s._v("name")]),s._v(" 和 "),a("code",[s._v("nameEn")]),s._v("。")])])])]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[a("p",[s._v("对于大数字(如 "),a("code",[s._v("Java")]),s._v(" 的 "),a("code",[s._v("long")]),s._v(" 类型)，返回给前端时需要设置为字符串类型, 防止 "),a("code",[s._v("JavaScript")]),s._v(" 发生溢出。")])]),s._v(" "),a("li",[a("p",[s._v("如果数字金额需要保留两位小数，那么此时"),a("strong",[s._v("推荐")]),s._v("以字符串形式返回给前端。因为浏览器会吞掉部分小数位。")])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Good ✅")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'144.00'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'144.00'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Bad ❌")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("144.00")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("144")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"7"}},[a("li",[a("p",[s._v("接口要进行自测，联调时，要保证接口根据入参调用时，功能正常，且出参与文档定义一致。"),a("strong",[s._v("避免出现首次调用即系统繁忙的场面。")])])]),s._v(" "),a("li",[a("p",[s._v("接口丢失或缺少，说明对于业务需求的理解有歧义。因此，"),a("strong",[s._v("必要的话，在评审需求完毕之后，后端同学可以主动跟前端同学碰一下接口")]),s._v("。")])]),s._v(" "),a("li",[a("p",[s._v("接口入参和出参的更改，要体现到文档上。口头传达，只是快捷渠道。"),a("strong",[s._v("前后端的对接始终以文档为准。")])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("确认好联调时间后，提前部署下所有环境")]),s._v("。")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);