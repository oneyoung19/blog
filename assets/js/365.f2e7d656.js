(window.webpackJsonp=window.webpackJsonp||[]).push([[365],{824:function(s,t,n){"use strict";n.r(t);var a=n(40),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("为了保证组件的"),n("strong",[s._v("复用性")]),s._v("，组件中的 "),n("code",[s._v("data")]),s._v(" 必须是一个函数。")]),s._v(" "),n("p",[s._v("组件内部定义需要是"),n("strong",[s._v("单个根元素")]),s._v("。")]),s._v(" "),n("h2",{attrs:{id:"_9-1-全局注册"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-全局注册"}},[s._v("#")]),s._v(" 9-1.全局注册")]),s._v(" "),n("p",[s._v("全局注册，适用于注册"),n("strong",[s._v("全局组件")]),s._v("。")]),s._v(" "),n("p",[s._v("注册一次，全局可用。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ComponentA'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  template"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("data")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("全局注册的行为必须在根 "),n("code",[s._v("Vue")]),s._v(" 实例 (通过 "),n("code",[s._v("new Vue")]),s._v(") 创建之前发生。")])]),s._v(" "),n("p",[n("strong",[s._v("自动化全局注册")])]),s._v(" "),n("p",[s._v("在现实的"),n("strong",[s._v("工程化")]),s._v("开发中，人工手动全局注册一个个的组件，显得非常麻烦，代码也会非常冗余。")]),s._v(" "),n("p",[s._v("假设有以下目录：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(".\n├── components\n│   ├── BaseButton.vue\n│   ├── index.js\n│   └── table\n│       └── BaseTable.vue\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("以 "),n("code",[s._v("webpack")]),s._v(" 中的 "),n("code",[s._v("require.context")]),s._v(" 为例：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" upperFirst "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash/upperFirst'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" camelCase "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash/camelCase'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取该文件的执行上下文 返回值是一个函数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" context "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../components'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.vue$/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可利用属性keys获取该上下文的符合条件的文件名数组集合")]),s._v("\ncontext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("filePath")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 根据文件路径获取大写组件名 譬如 ./table/BaseTable.vue 的结果是 BaseTable")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" componentName "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("upperFirst")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("camelCase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filePath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("spilit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("pop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.\\w+$/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 根据文件路径获取组件相关信息")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" componentInfo "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("context")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filePath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局注册 ")]),s._v("\n  Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    componentName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果这个组件选项是通过 `export default` 导出的，")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 那么就会优先使用 `.default`，")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 否则回退到使用模块的根。")]),s._v("\n    componentInfo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" componentInfo\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h2",{attrs:{id:"_9-2-局部注册"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-局部注册"}},[s._v("#")]),s._v(" 9-2.局部注册")]),s._v(" "),n("p",[s._v("局部注册相对于全局注册的一个优势，在使用形如 "),n("code",[s._v("webpack")]),s._v(" 的构建系统时，不会打包冗余代码，有利于 "),n("code",[s._v("tree-shaking")]),s._v("。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ComponentA "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path/to/ComponentA'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ComponentB "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  components"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ComponentA\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("data")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"_9-3-prop"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-prop"}},[s._v("#")]),s._v(" 9-3.prop")]),s._v(" "),n("ol",[n("li",[s._v("单向数据流")])]),s._v(" "),n("p",[s._v("如果改变了 "),n("code",[s._v("prop")]),s._v("，会报错：")]),s._v(" "),n("p",[n("code",[s._v("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value.")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("注意，这里的改变 "),n("code",[s._v("prop")]),s._v(" 指的是"),n("strong",[s._v("改变了 "),n("code",[s._v("prop")]),s._v(" 的指向")]),s._v("。")]),s._v(" "),n("p",[s._v("如果 "),n("code",[s._v("prop")]),s._v(" 是对象 "),n("code",[s._v("object")]),s._v("，那么改变其属性时不会触发报错（"),n("strong",[s._v("并没有改变其地址指向")]),s._v("），直接改变其指向才会报错。")]),s._v(" "),n("p",[s._v("但在子组件中改变对象类型的 "),n("code",[s._v("prop")]),s._v(" 属性将会影响到父组件的状态。")]),s._v(" "),n("p",[s._v("因为基本数据类型的映射是"),n("strong",[s._v("值")]),s._v("，复杂数据类型的映射是"),n("strong",[s._v("引用")]),s._v("。")])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[n("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-props.html#%E9%9D%9E-Prop-%E7%9A%84-Attribute",target:"_blank",rel:"noopener noreferrer"}},[s._v("非 Prop 的 Attribute"),n("OutboundLink")],1)])]),s._v(" "),n("p",[s._v("非 "),n("code",[s._v("prop")]),s._v(" 的 "),n("code",[s._v("attribute")]),s._v(" 默认会作用于"),n("strong",[s._v("子组件的根元素")]),s._v("上，并且会覆盖该根元素上设置的属性（"),n("code",[s._v("class")]),s._v("、"),n("code",[s._v("style")]),s._v(" 较为特殊，这俩会重新组合属性）。")]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("禁用 "),n("code",[s._v("Attribute")]),s._v(" 继承")])]),s._v(" "),n("p",[s._v("设置 "),n("code",[s._v("inheritAttrs: false")]),s._v("，子组件的根元素将不会继承父组件内设置的 "),n("code",[s._v("attribute")]),s._v("。")]),s._v(" "),n("p",[s._v("注意 "),n("code",[s._v("inheritAttrs: false")]),s._v(" 选项不会影响 "),n("code",[s._v("style")]),s._v(" 和 "),n("code",[s._v("class")]),s._v(" 的绑定。")]),s._v(" "),n("p",[s._v("可利用 "),n("code",[s._v("inheritAttrs: false")]),s._v(" 结合 "),n("code",[s._v('v-bind="$attrs"')]),s._v("，指定子组件内的目标元素接收父组件内设置的 "),n("code",[s._v("attribute")]),s._v("。（"),n("strong",[s._v("同样，这里 "),n("code",[s._v("style")]),s._v(" 和 "),n("code",[s._v("class")]),s._v(" 的绑定也不会受影响")]),s._v("）")]),s._v(" "),n("h2",{attrs:{id:"_9-4-自定义事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-自定义事件"}},[s._v("#")]),s._v(" 9-4.自定义事件")]),s._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-custom-events.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84-v-model",target:"_blank",rel:"noopener noreferrer"}},[s._v("自定义 "),n("code",[s._v("v-model")]),n("OutboundLink")],1)])]),s._v(" "),n("p",[n("code",[s._v("v-model")]),s._v(" 默认等于 "),n("code",[s._v("v-bind:value")]),s._v(" 及 "),n("code",[s._v('v-on:input="value = $event.target.value"')]),s._v("。")]),s._v(" "),n("p",[s._v("所以 "),n("code",[s._v("v-model")]),s._v(" 会改变 "),n("code",[s._v("value")]),s._v(" 属性的值。")]),s._v(" "),n("p",[s._v("在单选框 "),n("code",[s._v("radio")]),s._v(" 或者复选框 "),n("code",[s._v("checkbox")]),s._v(" 上，"),n("code",[s._v("v-model")]),s._v(" 如果绑定的是基本类型的值，则会将 "),n("code",[s._v("value")]),s._v(" 修改为 "),n("code",[s._v("true")]),s._v(" 或 "),n("code",[s._v("false")]),s._v("。")]),s._v(" "),n("p",[s._v("在某些表单下（譬如 "),n("code",[s._v("checkbox")]),s._v("）, "),n("code",[s._v("value")]),s._v(" 属性是可以结合 "),n("code",[s._v("name")]),s._v(" 属性通过 "),n("code",[s._v("form")]),s._v(" 表单提交到服务端的，但 "),n("code",[s._v("value")]),s._v(" 不能是 "),n("code",[s._v("true")]),s._v(" 或 "),n("code",[s._v("false")]),s._v("，即使在 "),n("code",[s._v("DOM")]),s._v(" 中布尔值被认作字符串。")]),s._v(" "),n("p",[s._v("通过上述论述，可知在某些场景下，表单元素需要 "),n("code",[s._v("value")]),s._v(" 属性进行其他操作时，此时我们不能粗暴的直接使用 "),n("code",[s._v("v-model")]),s._v(" 进行绑定，"),n("code",[s._v("Vue")]),s._v(" 对此提供了 "),n("code",[s._v("modle")]),s._v(" 属性供我们自定义 "),n("code",[s._v("v-model")]),s._v(" 绑定。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'base-checkbox'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  model"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    prop"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'checked'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    event"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'change'")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  props"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    checked"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Boolean\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  template"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\n    <input\n      type="checkbox"\n      v-bind:checked="checked"\n      v-on:change="$emit(\'change\', $event.target.checked)"\n    >\n  ')]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[n("code",[s._v("$listeners")])])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'base-input'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  inheritAttrs"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  props"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'label'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  computed"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("inputListeners")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" vm "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// `Object.assign` 将所有的对象合并为一个新对象")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("assign")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 我们从父级添加所有的监听器")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$listeners"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 然后我们添加自定义监听器，")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 或覆写一些监听器的行为")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里确保组件配合 `v-model` 的工作")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("input")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$emit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'input'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  template"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\n    <label>\n      {{ label }}\n      <input\n        v-bind="$attrs"\n        v-bind:value="value"\n        v-on="inputListeners"\n      >\n    </label>\n  ')]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("h2",{attrs:{id:"_9-5-插槽"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-插槽"}},[s._v("#")]),s._v(" 9-5.插槽")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-slots.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("插槽"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("strong",[s._v("在子组件中")]),s._v("：")]),s._v(" "),n("p",[s._v("使用 "),n("code",[s._v("<slot></slot>")]),s._v(" 预留默认插槽。")]),s._v(" "),n("p",[s._v("使用 "),n("code",[s._v('<slot name="name"></slot>')]),s._v(" 预留具名插槽。")]),s._v(" "),n("p",[s._v("使用 "),n("code",[s._v('<slot name="name" :prop="prop"></slot>')]),s._v(" 来预留具名作用域插槽。")]),s._v(" "),n("p",[n("strong",[s._v("在父组件中")])]),s._v(" "),n("ol",[n("li",[s._v("新语法")])]),s._v(" "),n("p",[s._v("自 "),n("code",[s._v("2.6.0")]),s._v(" 起的新版本语法，提供了 "),n("code",[s._v("v-slot")]),s._v("，可缩写为 "),n("code",[s._v("#")]),s._v("。")]),s._v(" "),n("p",[n("strong",[s._v("推荐在所有情况下都用在 "),n("code",[s._v("<template>")]),s._v(" 标签上。")])]),s._v(" "),n("p",[s._v("默认插槽，"),n("code",[s._v("v-slot")]),s._v(" 或 "),n("code",[s._v("v-slot:default")])]),s._v(" "),n("p",[s._v("具名插槽，"),n("code",[s._v("v-slot:[name]")])]),s._v(" "),n("p",[s._v("作用域插槽，"),n("code",[s._v('v-slot:[name]="slotProps"')])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("旧语法")])]),s._v(" "),n("p",[s._v("旧语法，是 "),n("code",[s._v("slot")]),s._v(" 与 "),n("code",[s._v("slot-scope")]),s._v("。")]),s._v(" "),n("p",[s._v("默认插槽，直接填充 或 "),n("code",[s._v('slot="default"')]),s._v("。")]),s._v(" "),n("p",[s._v("具名插槽，"),n("code",[s._v('slot="name"')])]),s._v(" "),n("p",[s._v("作用域插槽，"),n("code",[s._v('slot="name" slot-scope="slotProps"')])]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("编译作用域")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的。")])]),s._v(" "),n("h2",{attrs:{id:"_9-6-动态组件-异步组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9-6-动态组件-异步组件"}},[s._v("#")]),s._v(" 9-6.动态组件&异步组件")]),s._v(" "),n("ol",[n("li",[s._v("动态组件")])]),s._v(" "),n("p",[s._v("动态组件可利用 "),n("code",[s._v("is")]),s._v(" 属性进行切换。")]),s._v(" "),n("p",[s._v("组件会重新渲染。")]),s._v(" "),n("p",[s._v("① 利用 "),n("component"),s._v(" 元素的 "),n("code",[s._v("is")]),s._v(" 属性")],1),s._v(" "),n("p",[s._v("② "),n("code",[s._v("is")]),s._v(" 属性应该用 "),n("code",[s._v("v-bind")]),s._v(" 修饰（可以简写为 : ）")]),s._v(" "),n("p",[s._v("③ "),n("code",[s._v("is")]),s._v(" 属性应该传入注册的组件名")]),s._v(" "),n("p",[s._v("如果想要动态组件保留状态，可以使用 "),n("code",[s._v("<keep-alive>")]),s._v(" 来缓存。")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("条件渲染 "),n("code",[s._v("v-if")]),s._v(" 与动态组件 "),n("code",[s._v(":is")]),s._v(" 的区别：")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("条件渲染")]),s._v(" "),n("ul",[n("li",[s._v("工作方式：根据 "),n("code",[s._v("v-if")]),s._v(" 和 "),n("code",[s._v("v-else-if")]),s._v(" 的条件，"),n("code",[s._v("Vue")]),s._v(" 会决定渲染 "),n("code",[s._v("TextComponent")]),s._v("、"),n("code",[s._v("ImageComponent")]),s._v("、或 "),n("code",[s._v("JsonComponent")]),s._v("。")]),s._v(" "),n("li",[s._v("优缺点：每个组件的渲染条件都是独立的。如果有多个条件判断（比如更多的组件类型），代码会变得较冗长。")]),s._v(" "),n("li",[s._v("性能：条件渲染会根据条件判断只创建一个满足条件的组件，但每次重新渲染时，"),n("code",[s._v("Vue")]),s._v(" 可能会销毁和重建组件。")])])]),s._v(" "),n("li",[n("p",[s._v("动态组件")]),s._v(" "),n("ul",[n("li",[s._v("工作方式：通过 "),n("code",[s._v(":is")]),s._v(" 绑定动态指定的组件名称，"),n("code",[s._v("Vue")]),s._v(" 自动渲染与 item 变量相对应的组件，比如 "),n("code",[s._v("TextComponent")]),s._v("、"),n("code",[s._v("ImageComponent")]),s._v(" 或 "),n("code",[s._v("JsonComponent")]),s._v("。")]),s._v(" "),n("li",[s._v("优缺点：代码更加简洁，尤其是当有很多种可能的组件类型时，无需为每种类型写条件判断。")]),s._v(" "),n("li",[s._v("性能：动态组件会复用现有组件实例，减少频繁的销毁和重建。动态组件的显示和隐藏通常不会销毁组件实例（除非设置 "),n("code",[s._v("key")]),s._v(" 强制重新渲染）。")])])])])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("异步组件")])]),s._v(" "),n("p",[s._v("异步组件根据 "),n("code",[s._v("resolve")]),s._v(" 和 "),n("code",[s._v("reject")]),s._v(" 的执行情况，决定组件的渲染。")]),s._v(" "),n("p",[s._v("支持以下两种用法：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("components"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'my-component'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./my-async-component'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vue@2.3.0+，vue-router@2.4.0+")]),s._v("\ncomponents"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'my-component'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 需要加载的组件 (应该是一个 `Promise` 对象)")]),s._v("\n\t\tcomponent"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./MyComponent.vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 异步组件加载时使用的组件")]),s._v("\n\t\tloading"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" LoadingComponent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 加载失败时使用的组件")]),s._v("\n\t\terror"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ErrorComponent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 展示加载时组件的延时时间。默认值是 200 (毫秒)")]),s._v("\n\t\tdelay"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果提供了超时时间且组件加载也超时了，")]),s._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 则使用加载失败时使用的组件。默认值是：`Infinity`")]),s._v("\n\t\ttimeout"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[n("code",[s._v("Webpack")]),s._v(" 提供了"),n("a",{attrs:{href:"https://webpack.js.org/guides/code-splitting/",target:"_blank",rel:"noopener noreferrer"}},[s._v("code-splitting"),n("OutboundLink")],1),s._v("来将 "),n("code",[s._v("import()")]),s._v(" 语法的相关 "),n("code",[s._v("chunks")]),s._v(" 自动抽离为 "),n("code",[s._v("Async chunks")]),s._v("。")]),s._v(" "),n("p",[s._v("另外，"),n("code",[s._v("Webpack")]),s._v(" 还会提供 "),n("code",[s._v("Prefetch")]),s._v(" 和 "),n("code",[s._v("Preload")]),s._v(" 来优化异步组件的加载。")]),s._v(" "),n("p",[s._v("异步组件整体执行逻辑如下：")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("在打包时，"),n("code",[s._v("Webpack")]),s._v(" 会根据 "),n("code",[s._v("import()")]),s._v(" 语法，"),n("strong",[s._v("将相关 "),n("code",[s._v("chunks")]),s._v(" 抽离为 "),n("code",[s._v("Async chunks")])]),s._v("。")])]),s._v(" "),n("li",[n("p",[s._v("当 "),n("code",[s._v("Vue")]),s._v(" 的异步路由被触发时，"),n("code",[s._v("webpack_require")]),s._v(" 会被调用，"),n("strong",[s._v("利用 "),n("code",[s._v("JSONP")]),s._v(" 来获取 "),n("code",[s._v("Async chunks")])]),s._v("。")])]),s._v(" "),n("li",[n("p",[s._v("当 "),n("code",[s._v("Async chunks")]),s._v(" 加载成功后，会调用 "),n("code",[s._v("resolve")]),s._v(" 方法，"),n("code",[s._v("Vue")]),s._v(" 会根据组件名称进行渲染。")])]),s._v(" "),n("li",[n("p",[s._v("如果加载失败，会调用 "),n("code",[s._v("reject")]),s._v(" 方法，"),n("code",[s._v("Vue")]),s._v(" 会根据组件名称进行渲染。")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);