(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{540:function(t,a,s){"use strict";s.r(a);var e=s(40),_=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[s("code",[t._v("history")]),t._v(" 属性提供了操作"),s("strong",[t._v("浏览器会话历史")]),t._v("的接口。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/main/img/e6c9d24ely1h22ie8rh72j21sk0mctcc.jpg",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_5-1-属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-属性"}},[t._v("#")]),t._v(" 5-1.属性")]),t._v(" "),s("h3",{attrs:{id:"_5-1-1-length"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-length"}},[t._v("#")]),t._v(" 5-1-1.length")]),t._v(" "),s("p",[s("code",[t._v("length")]),t._v(" 属性表示"),s("strong",[t._v("当前窗口")]),t._v("一共访问过的网址数量。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_5-1-2-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-2-state"}},[t._v("#")]),t._v(" 5-1-2.state")]),t._v(" "),s("p",[s("code",[t._v("state")]),t._v(" 属性与 "),s("code",[t._v("pushState")]),t._v(" 或者 "),s("code",[t._v("replaceState")]),t._v(" 中声明的参数相关联。并不是网址中的 "),s("code",[t._v("queryString")]),t._v("。")]),t._v(" "),s("p",[t._v("默认值是 "),s("code",[t._v("null")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"_5-2-方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-方法"}},[t._v("#")]),t._v(" 5-2.方法")]),t._v(" "),s("p",[s("code",[t._v("history")]),t._v(" 上的方法分为两类。")]),t._v(" "),s("p",[t._v("一类是用来触发浏览器的前进后退操作：")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("back()")])]),t._v(" "),s("li",[s("code",[t._v("forward()")])]),t._v(" "),s("li",[s("code",[t._v("go()")])])]),t._v(" "),s("p",[t._v("另一类是添加或修改浏览器历史记录条目：")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("pushState()")])]),t._v(" "),s("li",[s("code",[t._v("replaceState()")])])]),t._v(" "),s("h3",{attrs:{id:"_5-2-1-back"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-back"}},[t._v("#")]),t._v(" 5-2-1.back()")]),t._v(" "),s("p",[t._v("相当于点击一次浏览器后退按钮：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("back")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("如果当前页面无可后退页面，则上述代码调用后，不会起作用。")]),t._v(" "),s("h3",{attrs:{id:"_5-2-2-forward"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2-forward"}},[t._v("#")]),t._v(" 5-2-2.forward()")]),t._v(" "),s("p",[t._v("相当于点击一次浏览器前进按钮：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forward")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("如果当前页面无可前进页面，则上述代码调用后，不会起作用。")]),t._v(" "),s("h3",{attrs:{id:"_5-2-3-go"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-3-go"}},[t._v("#")]),t._v(" 5-2-3.go()")]),t._v(" "),s("p",[t._v("该方法可手动指定后退或者前进几个页面。")]),t._v(" "),s("p",[t._v("相当于 "),s("code",[t._v("back")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("相当于 "),s("code",[t._v("forward")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("go")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"_5-2-4-pushstate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-4-pushstate"}},[t._v("#")]),t._v(" 5-2-4.pushState()")]),t._v(" "),s("p",[s("code",[t._v("pushState")]),t._v(" 可以用来在浏览器历史记录中添加条目。")]),t._v(" "),s("blockquote",[s("p",[t._v("window.history.pushState(state, title, url)")])]),t._v(" "),s("p",[t._v("有三个参数：")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("state")]),t._v(": 它会与新条目绑定在一起，可以用来存储一些简单的数据，不过不能存太多，"),s("code",[t._v("firefox")]),t._v(" 对它的限制是 "),s("code",[t._v("640K")]),t._v("，这个对象可以通过"),s("code",[t._v("popstate")]),t._v(" 事件对象的 "),s("code",[t._v("state")]),t._v(" 属性或者 "),s("code",[t._v("window.history.state")]),t._v(" 来访问。")]),t._v(" "),s("li",[s("code",[t._v("title")]),t._v(": 目前浏览器都是忽略它的，在使用的时候一般传入 "),s("code",[t._v("null")]),t._v(" 即可。")]),t._v(" "),s("li",[s("code",[t._v("url")]),t._v(": 新条目的地址。如果没有，默认就是当前文档的地址。可以是相对地址或者绝对地址。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("上述的相对地址，会相对于当前文档。")]),t._v(" "),s("p",[t._v("而绝对地址必须是"),s("strong",[t._v("同源地址")]),t._v("，即绝对地址与当前文档地址是同源的，不能是跨域。否则会报错：")]),t._v(" "),s("p",[s("code",[t._v("Uncaught DOMException: Failed to execute 'pushState' on 'History': A history state object with URL cannot be created in a document with origin and URL.")])])]),t._v(" "),s("p",[s("code",[t._v("pushState")]),t._v(" 具有以下特点：")]),t._v(" "),s("ol",[s("li",[t._v("更改当前 "),s("code",[t._v("URL")]),t._v("，但浏览器页面不会跳转，不会刷新。")]),t._v(" "),s("li",[t._v("会影响浏览器历史记录。")])]),t._v(" "),s("p",[t._v("可以这样理解，"),s("strong",[s("code",[t._v("pushState")]),t._v(" 与 "),s("code",[t._v("replaceState")]),t._v(" 是浏览器暴露给开发者用来操作浏览器历史记录的接口")]),t._v("。")]),t._v(" "),s("p",[t._v("开发者可以利用这俩接口来模拟实现自己想要的路由切换功能。")]),t._v(" "),s("h3",{attrs:{id:"_5-2-5-replacestate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-5-replacestate"}},[t._v("#")]),t._v(" 5-2-5.replaceState()")]),t._v(" "),s("p",[s("code",[t._v("replaceState")]),t._v(" 方法与 "),s("code",[t._v("pushState")]),t._v(" 方法大同小异。")]),t._v(" "),s("p",[t._v("只有一点不同：")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("pushState")]),t._v(" 是在当前历史记录的基础上添加一条新的历史记录。")]),t._v(" "),s("li",[s("code",[t._v("replaceState")]),t._v(" 则是以一条新的历史记录替换当前历史记录。")])]),t._v(" "),s("h2",{attrs:{id:"_5-3-popstate事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-popstate事件"}},[t._v("#")]),t._v(" 5-3."),s("code",[t._v("popstate")]),t._v("事件")]),t._v(" "),s("p",[s("code",[t._v("pushState")]),t._v(" 与 "),s("code",[t._v("replaceState")]),t._v(" 的调用，不会触发 "),s("code",[t._v("popstate")]),t._v(" 事件。")]),t._v(" "),s("p",[t._v("只有用户手动点击浏览器倒退按钮和前进按钮，或者使用 "),s("code",[t._v("JavaScript")]),t._v(" 调用"),s("code",[t._v("back()")]),t._v("、"),s("code",[t._v("forward()")]),t._v("、"),s("code",[t._v("go()")]),t._v("方法时才会触发 "),s("code",[t._v("popstate")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'popstate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("页面第一次加载的时候，浏览器不会触发 "),s("code",[t._v("popstate")]),t._v(" 事件，但可以正常访问 "),s("code",[t._v("history.state")]),t._v("。")])]),t._v(" "),s("h2",{attrs:{id:"_5-4-hashchange事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-hashchange事件"}},[t._v("#")]),t._v(" 5-4."),s("code",[t._v("hashchange")]),t._v("事件")]),t._v(" "),s("p",[t._v("触发 "),s("code",[t._v("hashchange")]),t._v(" 只有以下几种情况：")]),t._v(" "),s("ol",[s("li",[t._v("直接更改浏览器地址，在最后面增加或改变 "),s("code",[t._v("#hash")]),t._v("；")]),t._v(" "),s("li",[t._v("通过改变 "),s("code",[t._v("location.href")]),t._v(" 或 "),s("code",[t._v("location.hash")]),t._v(" 的值；")]),t._v(" "),s("li",[t._v("通过触发点击带锚点的链接；")]),t._v(" "),s("li",[t._v("浏览器前进后退可能导致 "),s("code",[t._v("hash")]),t._v(" 的变化，前提是两个网页地址中的 "),s("code",[t._v("hash")]),t._v(" 值不同。")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("需要注意的是 "),s("code",[t._v("pushState")]),t._v(" 与 "),s("code",[t._v("replaceState")]),t._v(" 并不会触发 "),s("code",[t._v("hashchange")]),t._v(" 事件。")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/lyzg/p/5960609.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("pushState与hashchange"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=_.exports}}]);