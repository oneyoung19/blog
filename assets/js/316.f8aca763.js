(window.webpackJsonp=window.webpackJsonp||[]).push([[316],{774:function(s,t,a){"use strict";a.r(t);var n=a(40),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("为了保证组件的"),a("strong",[s._v("复用性")]),s._v("，组件中的 "),a("code",[s._v("data")]),s._v(" 必须是一个函数。")]),s._v(" "),a("p",[s._v("组件内部定义需要是"),a("strong",[s._v("单个根元素")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"_9-1-全局注册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-全局注册"}},[s._v("#")]),s._v(" 9-1.全局注册")]),s._v(" "),a("p",[s._v("全局注册，适用于注册"),a("strong",[s._v("全局组件")]),s._v("。")]),s._v(" "),a("p",[s._v("注册一次，全局可用。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ComponentA'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("data")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  methods"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("全局注册的行为必须在根 "),a("code",[s._v("Vue")]),s._v(" 实例 (通过 "),a("code",[s._v("new Vue")]),s._v(") 创建之前发生。")])]),s._v(" "),a("p",[a("strong",[s._v("自动化全局注册")])]),s._v(" "),a("p",[s._v("在现实的"),a("strong",[s._v("工程化")]),s._v("开发中，人工手动全局注册一个个的组件，显得非常麻烦，代码也会非常冗余。")]),s._v(" "),a("p",[s._v("假设有以下目录：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(".\n├── components\n│   ├── BaseButton.vue\n│   ├── index.js\n│   └── table\n│       └── BaseTable.vue\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("以 "),a("code",[s._v("webpack")]),s._v(" 中的 "),a("code",[s._v("require.context")]),s._v(" 为例：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" upperFirst "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash/upperFirst'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" camelCase "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lodash/camelCase'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 获取该文件的执行上下文 返回值是一个函数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" context "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" require"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../components'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.vue$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 可利用属性keys获取该上下文的符合条件的文件名数组集合")]),s._v("\ncontext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("filePath")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 根据文件路径获取大写组件名 譬如 ./table/BaseTable.vue 的结果是 BaseTable")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" componentName "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("upperFirst")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("camelCase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filePath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("spilit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.\\w+$/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 根据文件路径获取组件相关信息")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" componentInfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filePath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 全局注册 ")]),s._v("\n  Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    componentName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果这个组件选项是通过 `export default` 导出的，")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 那么就会优先使用 `.default`，")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 否则回退到使用模块的根。")]),s._v("\n    componentInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" componentInfo\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h3",{attrs:{id:"_9-2-局部注册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-局部注册"}},[s._v("#")]),s._v(" 9-2.局部注册")]),s._v(" "),a("p",[s._v("局部注册相对于全局注册的一个优势，在使用形如 "),a("code",[s._v("webpack")]),s._v(" 的构建系统时，不会打包冗余代码，有利于 "),a("code",[s._v("tree-shaking")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ComponentA "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path/to/ComponentA'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ComponentB "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  components"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ComponentA\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("data")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  methods"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"_9-3-prop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-prop"}},[s._v("#")]),s._v(" 9-3.prop")]),s._v(" "),a("ol",[a("li",[s._v("单向数据流")])]),s._v(" "),a("p",[s._v("如果改变了 "),a("code",[s._v("prop")]),s._v("，会报错：")]),s._v(" "),a("p",[a("code",[s._v("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value.")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("注意，这里的改变 "),a("code",[s._v("prop")]),s._v(" 指的是"),a("strong",[s._v("改变了 "),a("code",[s._v("prop")]),s._v(" 的指向")]),s._v("。")]),s._v(" "),a("p",[s._v("如果 "),a("code",[s._v("prop")]),s._v(" 是对象 "),a("code",[s._v("object")]),s._v("，那么改变其属性时不会触发报错（"),a("strong",[s._v("并没有改变其地址指向")]),s._v("），直接改变其指向才会报错。")]),s._v(" "),a("p",[s._v("但在子组件中改变对象类型的 "),a("code",[s._v("prop")]),s._v(" 属性将会影响到父组件的状态。")]),s._v(" "),a("p",[s._v("因为基本数据类型的映射是"),a("strong",[s._v("值")]),s._v("，复杂数据类型的映射是"),a("strong",[s._v("引用")]),s._v("。")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-props.html#%E9%9D%9E-Prop-%E7%9A%84-Attribute",target:"_blank",rel:"noopener noreferrer"}},[s._v("非 Prop 的 Attribute"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("非 "),a("code",[s._v("prop")]),s._v(" 的 "),a("code",[s._v("attribute")]),s._v(" 默认会作用于"),a("strong",[s._v("子组件的根元素")]),s._v("上，并且会覆盖该根元素上设置的属性（"),a("code",[s._v("class")]),s._v("、"),a("code",[s._v("style")]),s._v(" 较为特殊，这俩会重新组合属性）。")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("禁用 "),a("code",[s._v("Attribute")]),s._v(" 继承")])]),s._v(" "),a("p",[s._v("设置 "),a("code",[s._v("inheritAttrs: false")]),s._v("，子组件的根元素将不会继承父组件内设置的 "),a("code",[s._v("attribute")]),s._v("。")]),s._v(" "),a("p",[s._v("注意 "),a("code",[s._v("inheritAttrs: false")]),s._v(" 选项不会影响 "),a("code",[s._v("style")]),s._v(" 和 "),a("code",[s._v("class")]),s._v(" 的绑定。")]),s._v(" "),a("p",[s._v("可利用 "),a("code",[s._v("inheritAttrs: false")]),s._v(" 结合 "),a("code",[s._v('v-bind="$attrs"')]),s._v("，指定子组件内的目标元素接收父组件内设置的 "),a("code",[s._v("attribute")]),s._v("。（"),a("strong",[s._v("同样，这里 "),a("code",[s._v("style")]),s._v(" 和 "),a("code",[s._v("class")]),s._v(" 的绑定也不会受影响")]),s._v("）")]),s._v(" "),a("h3",{attrs:{id:"_9-4-自定义事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-自定义事件"}},[s._v("#")]),s._v(" 9-4.自定义事件")]),s._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-custom-events.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84-v-model",target:"_blank",rel:"noopener noreferrer"}},[s._v("自定义 "),a("code",[s._v("v-model")]),a("OutboundLink")],1)])]),s._v(" "),a("p",[a("code",[s._v("v-model")]),s._v(" 默认等于 "),a("code",[s._v("v-bind:value")]),s._v(" 及 "),a("code",[s._v('v-on:input="value = $event.target.value"')]),s._v("。")]),s._v(" "),a("p",[s._v("所以 "),a("code",[s._v("v-model")]),s._v(" 会改变 "),a("code",[s._v("value")]),s._v(" 属性的值。")]),s._v(" "),a("p",[s._v("在单选框 "),a("code",[s._v("radio")]),s._v(" 或者复选框 "),a("code",[s._v("checkbox")]),s._v(" 上，"),a("code",[s._v("v-model")]),s._v(" 如果绑定的是基本类型的值，则会将 "),a("code",[s._v("value")]),s._v(" 修改为 "),a("code",[s._v("true")]),s._v(" 或 "),a("code",[s._v("false")]),s._v("。")]),s._v(" "),a("p",[s._v("在某些表单下（譬如 "),a("code",[s._v("checkbox")]),s._v("）, "),a("code",[s._v("value")]),s._v(" 属性是可以结合 "),a("code",[s._v("name")]),s._v(" 属性通过 "),a("code",[s._v("form")]),s._v(" 表单提交到服务端的，但 "),a("code",[s._v("value")]),s._v(" 不能是 "),a("code",[s._v("true")]),s._v(" 或 "),a("code",[s._v("false")]),s._v("，即使在 "),a("code",[s._v("DOM")]),s._v(" 中布尔值被认作字符串。")]),s._v(" "),a("p",[s._v("通过上述论述，可知在某些场景下，表单元素需要 "),a("code",[s._v("value")]),s._v(" 属性进行其他操作时，此时我们不能粗暴的直接使用 "),a("code",[s._v("v-model")]),s._v(" 进行绑定，"),a("code",[s._v("Vue")]),s._v(" 对此提供了 "),a("code",[s._v("modle")]),s._v(" 属性供我们自定义 "),a("code",[s._v("v-model")]),s._v(" 绑定。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'base-checkbox'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  model"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    prop"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'checked'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    event"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'change'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  props"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    checked"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Boolean\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\n    <input\n      type="checkbox"\n      v-bind:checked="checked"\n      v-on:change="$emit(\'change\', $event.target.checked)"\n    >\n  ')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[a("code",[s._v("$listeners")])])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'base-input'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  inheritAttrs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  props"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'label'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  computed"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("inputListeners")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" vm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// `Object.assign` 将所有的对象合并为一个新对象")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("assign")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 我们从父级添加所有的监听器")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$listeners"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 然后我们添加自定义监听器，")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 或覆写一些监听器的行为")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里确保组件配合 `v-model` 的工作")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("input")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("$emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'input'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\n    <label>\n      {{ label }}\n      <input\n        v-bind="$attrs"\n        v-bind:value="value"\n        v-on="inputListeners"\n      >\n    </label>\n  ')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("h3",{attrs:{id:"_9-5-插槽"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-插槽"}},[s._v("#")]),s._v(" 9-5.插槽")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-slots.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("插槽"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("strong",[s._v("在子组件中")]),s._v("：")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("<slot></slot>")]),s._v(" 预留默认插槽。")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v('<slot name="name"></slot>')]),s._v(" 预留具名插槽。")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v('<slot name="name" :prop="prop"></slot>')]),s._v(" 来预留具名作用域插槽。")]),s._v(" "),a("p",[a("strong",[s._v("在父组件中")])]),s._v(" "),a("ol",[a("li",[s._v("新语法")])]),s._v(" "),a("p",[s._v("自 "),a("code",[s._v("2.6.0")]),s._v(" 起的新版本语法，提供了 "),a("code",[s._v("v-slot")]),s._v("，可缩写为 "),a("code",[s._v("#")]),s._v("。")]),s._v(" "),a("p",[a("strong",[s._v("推荐在所有情况下都用在 "),a("code",[s._v("<template>")]),s._v(" 标签上。")])]),s._v(" "),a("p",[s._v("默认插槽，"),a("code",[s._v("v-slot")]),s._v(" 或 "),a("code",[s._v("v-slot:default")])]),s._v(" "),a("p",[s._v("具名插槽，"),a("code",[s._v("v-slot:[name]")])]),s._v(" "),a("p",[s._v("作用域插槽，"),a("code",[s._v('v-slot:[name]="slotProps"')])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("旧语法")])]),s._v(" "),a("p",[s._v("旧语法，是 "),a("code",[s._v("slot")]),s._v(" 与 "),a("code",[s._v("slot-scope")]),s._v("。")]),s._v(" "),a("p",[s._v("默认插槽，直接填充 或 "),a("code",[s._v('slot="default"')]),s._v("。")]),s._v(" "),a("p",[s._v("具名插槽，"),a("code",[s._v('slot="name"')])]),s._v(" "),a("p",[s._v("作用域插槽，"),a("code",[s._v('slot="name" slot-scope="slotProps"')])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("编译作用域")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的。")])]),s._v(" "),a("h3",{attrs:{id:"_9-6-动态组件-异步组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-6-动态组件-异步组件"}},[s._v("#")]),s._v(" 9-6.动态组件&异步组件")]),s._v(" "),a("ol",[a("li",[s._v("动态组件")])]),s._v(" "),a("p",[s._v("动态组件可利用 "),a("code",[s._v("is")]),s._v(" 属性进行切换。")]),s._v(" "),a("p",[s._v("组件会重新渲染。")]),s._v(" "),a("p",[s._v("① 利用 "),a("component"),s._v(" 元素的 "),a("code",[s._v("is")]),s._v(" 属性")],1),s._v(" "),a("p",[s._v("② "),a("code",[s._v("is")]),s._v(" 属性应该用 "),a("code",[s._v("v-bind")]),s._v(" 修饰（可以简写为 : ）")]),s._v(" "),a("p",[s._v("③ "),a("code",[s._v("is")]),s._v(" 属性应该传入注册的组件名")]),s._v(" "),a("p",[s._v("TODO: 动态组件和 "),a("code",[s._v("v-if")]),s._v(" 有区别吗")]),s._v(" "),a("p",[s._v("如果想要动态组件保留状态，可以使用 "),a("code",[s._v("<keep-alive>")]),s._v(" 来缓存。")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("异步组件")])]),s._v(" "),a("p",[s._v("TODO: 原理及 "),a("code",[s._v("webpack")]),s._v(" 相关实现")])])}),[],!1,null,null,null);t.default=e.exports}}]);