(window.webpackJsonp=window.webpackJsonp||[]).push([[238],{694:function(s,t,e){"use strict";e.r(t);var n=e(40),a=Object(n.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[e("code",[s._v("Eslint")]),s._v(" 可以通过"),e("strong",[s._v("配置文件")]),s._v("、"),e("strong",[s._v("代码注释")]),s._v(" "),e("code",[s._v("/* eslint */")]),s._v("以及 "),e("code",[s._v("package.json")]),s._v(" 中的 "),e("code",[s._v("eslintConfig")]),s._v(" 来设置。")]),s._v(" "),e("h2",{attrs:{id:"_2-1-类别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-类别"}},[s._v("#")]),s._v(" 2-1.类别")]),s._v(" "),e("p",[s._v("配置文件的命名通常是 "),e("code",[s._v(".eslintrc")]),s._v("，根据文件类别，可以分为以下几种("),e("strong",[s._v("同一目录下，优先级从高到低")]),s._v(")：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("JavaScript")]),s._v(" - "),e("code",[s._v(".eslintrc.js")]),s._v(" 笔者推荐项，易于扩展。")]),s._v(" "),e("li",[e("code",[s._v("JavaScript (ESM)")])]),s._v(" "),e("li",[e("code",[s._v("YAML")]),s._v(" - "),e("code",[s._v(".eslintrc.yaml")]),s._v(" 或者 "),e("code",[s._v(".eslintrc.yml")])]),s._v(" "),e("li",[e("code",[s._v("JSON")]),s._v(" - "),e("code",[s._v(".eslintrc.json")])]),s._v(" "),e("li",[e("code",[s._v("package.json")])])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("譬如：如果在同一目录下，同时存在 "),e("code",[s._v(".eslintrc.*")]),s._v(" 和 "),e("code",[s._v("package.json")]),s._v(" 文件，")]),s._v(" "),e("p",[s._v("则 "),e("code",[s._v(".eslintrc.*")]),s._v(" 的优先级更高，"),e("code",[s._v("package.json")]),s._v(" 文件中的 "),e("code",[s._v("eslintConfig")]),s._v(" 配置不会被采用。")])]),s._v(" "),e("h2",{attrs:{id:"_2-2-执行逻辑"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-执行逻辑"}},[s._v("#")]),s._v(" 2-2.执行逻辑")]),s._v(" "),e("p",[s._v("从 "),e("code",[s._v("lint")]),s._v(" 的目标文件所在目录开始，依次向上每个目录寻找 "),e("code",[s._v(".eslintrc.*")]),s._v(" 文件，直到某 "),e("code",[s._v(".eslintrc.*")]),s._v(" 文件声明了 "),e("code",[s._v("root: true")]),s._v(" 属性、或项目根目录 "),e("code",[s._v("/")]),s._v(" 为止。")]),s._v(" "),e("p",[s._v("如果上述两项都没有找到对应配置文件，则会在用户根目录 "),e("code",[s._v("~/")]),s._v(" 判定是否有全局配置。")]),s._v(" "),e("p",[s._v("=> "),e("a",{attrs:{href:"https://eslint.org/docs/latest/user-guide/configuring/configuration-files#cascading-and-hierarchy",target:"_blank",rel:"noopener noreferrer"}},[s._v("Cascading and Hierarchy"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("当使用 "),e("code",[s._v(".eslintrc.*")]),s._v(" 或者 "),e("code",[s._v("package.json")]),s._v(" 配置时，不同目录下的配置文件有级联优先级。")]),s._v(" "),e("p",[s._v("假设有如下的结构：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("your-project\n├── .eslintrc.json\n├── lib\n│ └── source.js\n└─┬ tests\n  ├── .eslintrc.json\n  └── test.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("首先，以被 "),e("code",[s._v("lint")]),s._v(" 的目标文件所在目录为起始，"),e("strong",[s._v("该层目录下的 "),e("code",[s._v(".eslintrc.*")]),s._v(" 文件的优先级最高")]),s._v("。")]),s._v(" "),e("p",[s._v("然后 "),e("code",[s._v("Eslint")]),s._v(" 会随着目录层级依次向上递归搜索配置文件，并"),e("strong",[s._v("合并配置选项")]),s._v("，直到某一目录下的 "),e("code",[s._v(".eslintrc")]),s._v(" 文件设置了 "),e("code",[s._v("root: true")]),s._v("、或者项目根目录 "),e("code",[s._v("/")]),s._v("、或者用户根目录 "),e("code",[s._v("~/")]),s._v("。")]),s._v(" "),e("p",[s._v("类似的，如果项目根目录下有一个配置了 "),e("code",[s._v("eslintConfig")]),s._v(" 属性的 "),e("code",[s._v("package.json")]),s._v(" 文件，则该根目录配置会对所有子目录都生效。")]),s._v(" "),e("p",[s._v("如果根目录配置与在 "),e("code",[s._v("tests/")]),s._v(" 下的 "),e("code",[s._v(".eslintrc.*")]),s._v(" 文件配置出现了冲突，则后者的配置属性优先级更高，会覆盖前者的配置属性。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("your-project\n├── package.json\n├── lib\n│ └── source.js\n└─┬ tests\n  ├── .eslintrc.json\n  └── test.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("正如上文所说，"),e("code",[s._v("Eslint")]),s._v(" 默认会搜索所有层级目录中的配置文件，这其实是为了方便每一个目录能够定制化的设置一些 "),e("code",[s._v("lint")]),s._v(" 配置。")]),s._v(" "),e("p",[s._v("但在某些情况（项目系统比较庞大）下，这种特点会越来越不可控。")]),s._v(" "),e("p",[s._v("因此，"),e("code",[s._v("Eslint")]),s._v(" 提供了 "),e("code",[s._v("root: true")]),s._v(" 这个配置，来方便用户更加精细的控制配置级联层级和权重。")])]),s._v(" "),e("p",[s._v("例如，在 "),e("code",[s._v("lib/")]),s._v(" 下的 "),e("code",[s._v(".eslintrc.js")]),s._v(" 配置了 "),e("code",[s._v("root: true")]),s._v("，那么当将 "),e("code",[s._v("lib/main.js")]),s._v(" 文件作为 "),e("code",[s._v("lint")]),s._v(" 的目标时，"),e("code",[s._v("projectA/.eslintrc.js")]),s._v(" 并不会生效。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("home\n└── user\n    └── projectA\n        ├── .eslintrc.js  <- Not used\n        └── lib\n            ├── .eslintrc.js  <- { root: true }\n            └── main.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("总结：")]),s._v(" "),e("p",[e("code",[s._v("Eslint")]),s._v(" 的级联配置，从高到底的优先级，如下：")]),s._v(" "),e("ol",[e("li",[s._v("代码注释")]),s._v(" "),e("li",[e("code",[s._v("/*eslint-disable*/ /*eslint-enable*/")])]),s._v(" "),e("li",[e("code",[s._v("/*global*/")])]),s._v(" "),e("li",[e("code",[s._v("/*eslint*/")])]),s._v(" "),e("li",[e("code",[s._v("/*eslint-env*/")])]),s._v(" "),e("li",[s._v("命令行选项")]),s._v(" "),e("li",[e("code",[s._v("--global")])]),s._v(" "),e("li",[e("code",[s._v("--rule")])]),s._v(" "),e("li",[e("code",[s._v("--env")])]),s._v(" "),e("li",[e("code",[s._v("-c, --config")])]),s._v(" "),e("li",[s._v("项目级配置")]),s._v(" "),e("li",[s._v("与 "),e("code",[s._v("lint")]),s._v(" 目标文件同一级目录下的 "),e("code",[s._v(".eslintrc.*")]),s._v(" 或 "),e("code",[s._v("package.json")]),s._v(" 文件。")]),s._v(" "),e("li",[s._v("由 "),e("code",[s._v("lint")]),s._v(" 目标文件所在目录为起始，向上递增查找 "),e("code",[s._v(".eslintrc.*")]),s._v(" 或 "),e("code",[s._v("package.json")]),s._v(" 文件，直到文件根目录 "),e("code",[s._v("/")]),s._v("、 或查找到文件带有 "),e("code",[s._v("root: true")]),s._v(" 配置。")]),s._v(" "),e("li",[s._v("如果不满足 "),e("code",[s._v("1")]),s._v(" 和 "),e("code",[s._v("3")]),s._v(" 这两种情况，则会到 "),e("code",[s._v("~/.eslintrc")]),s._v(" 中寻找自定义配置。")])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("另外，要注意的是，用户级目录 "),e("code",[s._v("~/")]),s._v(" 已经不被推荐了。")]),s._v(" "),e("p",[s._v("=> "),e("a",{attrs:{href:"https://eslint.org/docs/latest/user-guide/configuring/configuration-files#personal-configuration-files-deprecated",target:"_blank",rel:"noopener noreferrer"}},[s._v("Personal Configuration Files (deprecated)"),e("OutboundLink")],1)])]),s._v(" "),e("h2",{attrs:{id:"_2-3-使用方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-使用方式"}},[s._v("#")]),s._v(" 2-3.使用方式")]),s._v(" "),e("ol",[e("li",[s._v("当文件被 "),e("code",[s._v("lint")]),s._v(" 时，"),e("code",[s._v("Eslint")]),s._v(" 会根据上述的规则和优先级，自动找寻并使用相关配置文件。")]),s._v(" "),e("li",[s._v("使用 "),e("code",[s._v("-c")]),s._v(" 指令，手动指定配置文件。")])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("在使用 "),e("code",[s._v("-c")]),s._v(" 指令时，依然会受到上级目录中的 "),e("code",[s._v(".eslintrc.*")]),s._v(" 文件的影响。如果想要避免这种影响，可以使用 "),e("code",[s._v("--no-eslintrc")]),s._v("。")]),s._v(" "),e("p",[s._v("譬如 "),e("code",[s._v("eslint -c libs/.eslintrc.json main.js --no-eslintrc")]),s._v("。")])]),s._v(" "),e("h2",{attrs:{id:"_2-4-可定义属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-可定义属性"}},[s._v("#")]),s._v(" 2-4.可定义属性")]),s._v(" "),e("p",[s._v("配置文件中除了上面的 "),e("code",[s._v("root: true")]),s._v(" 外还有许多可定义属性，以 "),e("code",[s._v(".eslintrc.js")]),s._v(" 为例：")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[s._v("module"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  root"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  globals"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  env"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  parserOptions"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  rules"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  configs"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  plugins"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  overrides"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])])])}),[],!1,null,null,null);t.default=a.exports}}]);