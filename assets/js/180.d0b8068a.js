(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{636:function(s,t,a){"use strict";a.r(t);var n=a(40),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("上一节阐述了如何声明 "),a("code",[s._v("ArrayBuffer")]),s._v("。而且其声明时的数值均为 "),a("code",[s._v("0")]),s._v("。")]),s._v(" "),a("p",[s._v("但在二进制的世界中，如何看待二进制的字节数，其结果是不同的。")]),s._v(" "),a("p",[s._v("譬如，长度为 "),a("code",[s._v("8")]),s._v(" 的一串二进制 "),a("code",[s._v("01010101")]),s._v(" 可以看做以下几种结果：")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("0")]),s._v("、"),a("code",[s._v("1")]),s._v("、"),a("code",[s._v("0")]),s._v("、"),a("code",[s._v("1")]),s._v("、"),a("code",[s._v("0")]),s._v("、"),a("code",[s._v("1")]),s._v("、"),a("code",[s._v("0")]),s._v("、"),a("code",[s._v("1")])]),s._v(" "),a("li",[a("code",[s._v("01")]),s._v("、"),a("code",[s._v("01")]),s._v("、"),a("code",[s._v("01")]),s._v("、"),a("code",[s._v("01")])]),s._v(" "),a("li",[a("code",[s._v("0101")]),s._v("、"),a("code",[s._v("0101")])]),s._v(" "),a("li",[a("code",[s._v("01010101")])])]),s._v(" "),a("p",[s._v("所以在这种情况下，我们能理解到的是：")]),s._v(" "),a("p",[a("strong",[s._v("ArrayBuffer二进制集合本身数据是没有意义的，除非提供了规则解释器")]),s._v("。")]),s._v(" "),a("p",[s._v("这里的规则解释器，也称作"),a("strong",[s._v("视图")]),s._v("。")]),s._v(" "),a("p",[s._v("视图对象本身并不存储任何东西。它是一副"),a("em",[s._v("眼镜")]),s._v("，透过它来解释存储在 "),a("code",[s._v("ArrayBuffer")]),s._v(" 中的字节。")]),s._v(" "),a("p",[s._v("视图有两种：")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("TypedArray")]),s._v(" 类型化数组。")]),s._v(" "),a("li",[a("code",[s._v("DataView")]),s._v(" 数据视图。")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("在计算机中，一些信息可以用 "),a("code",[s._v("1")]),s._v(" 个字节表示，可以用 "),a("code",[s._v("2")]),s._v(" 个字节表示，甚至可以用 "),a("code",[s._v("4")]),s._v(" 个字节表示。")]),s._v(" "),a("p",[s._v("也就是说"),a("strong",[s._v("二进制数据本身的含义在不同的规则（视图）下，其表示的含义是不同的")]),s._v("。")]),s._v(" "),a("p",[s._v("所以这就是为什么 "),a("code",[s._v("ArrayBuffer")]),s._v(" 只有在特定视图才有意义。")])]),s._v(" "),a("h2",{attrs:{id:"_1-typedarray"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-typedarray"}},[s._v("#")]),s._v(" 1.TypedArray")]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("JavaScript")]),s._v(" 中并不存在名为 "),a("code",[s._v("TypedArray")]),s._v(" 的构造函数。")]),s._v(" "),a("p",[s._v("这里的 "),a("code",[s._v("TypedArray")]),s._v(" 是一类构造函数的总称：")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("Uint8Array")]),s._v(": "),a("strong",[s._v("8 位无符号整数")]),s._v("。将每个字节视为 "),a("code",[s._v("0")]),s._v(" 到 "),a("code",[s._v("255")]),s._v(" 之间的单个数字（每个字节是 "),a("code",[s._v("8")]),s._v(" 位，因此只能容纳那么多）。")]),s._v(" "),a("li",[a("code",[s._v("Uint16Array")]),s._v(": "),a("strong",[s._v("16 位无符号整数")]),s._v("。将每 "),a("code",[s._v("2")]),s._v(" 个字节视为一个 "),a("code",[s._v("0")]),s._v(" 到 "),a("code",[s._v("65535")]),s._v(" 之间的整数。")]),s._v(" "),a("li",[a("code",[s._v("Uint32Array")]),s._v(": "),a("strong",[s._v("32 位无符号整数")]),s._v("将每 "),a("code",[s._v("4")]),s._v(" 个字节视为一个 0 到 4294967295 之间的整数。")]),s._v(" "),a("li",[a("code",[s._v("Uint8ClampedArray")]),s._v(": 用于 "),a("code",[s._v("8")]),s._v(" 位整数，在赋值时便"),a("strong",[s._v("固定")]),s._v("其值。")]),s._v(" "),a("li",[a("code",[s._v("Int8Array")]),s._v(": "),a("strong",[s._v("8 位无符号整数")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("Int16Array")]),s._v(": "),a("strong",[s._v("16 位无符号整数")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("Int32Array")]),s._v(":  "),a("strong",[s._v("32 位无符号整数")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("Float32Array")]),s._v(": "),a("strong",[s._v("32 位有符号浮点数")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("Float64Array")]),s._v(": "),a("strong",[s._v("64 位有符号浮点数")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("这些类型化数组的行为类似于常规数组："),a("strong",[s._v("具有索引，并且是可迭代的")]),s._v("。")])]),s._v(" "),a("p",[s._v("本文中的 "),a("code",[s._v("new TypedArray")]),s._v("，它表示 "),a("code",[s._v("new Uint8Array")]),s._v("、"),a("code",[s._v("new Int8Array")]),s._v(" 及其他中之一。")]),s._v(" "),a("h3",{attrs:{id:"_1-1-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-语法"}},[s._v("#")]),s._v(" 1-1.语法")]),s._v(" "),a("p",[a("code",[s._v("TypedArray")]),s._v(" 的使用方法有以下五种：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.以arrayBuffer为基础创建类型化数组 可以根据可选参数设置偏移量和指定长度")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TypedArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arrayBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("byteOffset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.创建一个与目标数组相同长度的类型化数组，并复制其内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TypedArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("array"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3.类型数组之间互相转化")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TypedArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("typedArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4.创建指定长度的类型化数组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TypedArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5.创建长度为零的类型化数组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TypedArray")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("我们在此依次举例说明下前三种使用方式：")]),s._v(" "),a("ol",[a("li",[s._v("以 "),a("code",[s._v("arrayBuffer")]),s._v(" 为基础创建类型化数组，可以根据可选参数设置偏移量和指定长度。")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" arrayBuffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayBuffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Uint16Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arrayBuffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("这里我们声明了字节长度为 "),a("code",[s._v("8")]),s._v(" 的 "),a("code",[s._v("arrayBuffer")]),s._v("，数值默认均为 "),a("code",[s._v("0")]),s._v("。")]),s._v(" "),a("p",[s._v("而后通过 "),a("code",[s._v("16")]),s._v(" 位类型化数组视图（将两个字节视作一个数据）来描述它，最终视图数据长度为 "),a("code",[s._v("4")]),s._v(":")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/main/img/e6c9d24ely1h3ce6eihn1j21sc0e4jtr.jpg",alt:""}})]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("创建一个与目标数组相同长度的类型化数组，并复制其内容")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Uint16Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("72")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("101")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("108")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("108")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/main/img/e6c9d24ely1h3cefa8wrkj21ya0e6acj.jpg",alt:""}})]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("类型数组之间互相转化")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" arr16 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Uint16Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("254")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arr16"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" arr8 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Uint8Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arr16"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("arr8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("这里要说明的一个现象是，可能存在"),a("strong",[s._v("越界行为")]),s._v("。")]),s._v(" "),a("p",[s._v("譬如，在 "),a("code",[s._v("Uint8Array")]),s._v(" 下的数据范围 "),a("code",[s._v("[0, 256)")]),s._v("，所以 "),a("code",[s._v("256")]),s._v(" 在 "),a("code",[s._v("Uint8Array")]),s._v(" 下转化时，数据会"),a("strong",[s._v("截取丢失")]),s._v("。")]),s._v(" "),a("p",[s._v("即 "),a("code",[s._v("100000000")]),s._v(" 被截取为 "),a("code",[s._v("00000000")]),s._v("，所以转化结果是 "),a("code",[s._v("0")]),s._v("。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/oneyoung19/vuepress-blog-img/main/img/e6c9d24ely1h3ceiiw25uj21vo0o6793.jpg",alt:""}})]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[a("code",[s._v("Uint8ClampedArray")]),s._v(" 在这方面比较特殊，它的表现不太一样。")]),s._v(" "),a("p",[s._v("对于大于 "),a("code",[s._v("255")]),s._v(" 的任何数字，它将保存为 "),a("code",[s._v("255")]),s._v("，对于任何负数，它将保存为 "),a("code",[s._v("0")]),s._v("。")]),s._v(" "),a("p",[a("strong",[s._v("此行为对于图像处理很有用")]),s._v("。")])]),s._v(" "),a("h3",{attrs:{id:"_1-2-方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-方法"}},[s._v("#")]),s._v(" 1-2.方法")]),s._v(" "),a("p",[a("code",[s._v("TypedArray")]),s._v(" 具有常规的 "),a("code",[s._v("Array")]),s._v(" 方法。")]),s._v(" "),a("p",[s._v("可以遍历（"),a("code",[s._v("iterate")]),s._v("）、"),a("code",[s._v("map")]),s._v("、"),a("code",[s._v("slice")]),s._v("、"),a("code",[s._v("find")]),s._v(" 和 "),a("code",[s._v("reduce")]),s._v("。")]),s._v(" "),a("p",[s._v("但有两个例外：")]),s._v(" "),a("ul",[a("li",[s._v("没有 "),a("code",[s._v("splice")]),s._v(" —— 我们无法“删除”一个值，因为类型化数组是缓冲区（"),a("code",[s._v("buffer")]),s._v("）上的视图，并且缓冲区（"),a("code",[s._v("buffer")]),s._v("）是固定的、连续的内存区域。我们所能做的就是分配一个零值。")]),s._v(" "),a("li",[s._v("无 "),a("code",[s._v("concat")]),s._v(" 方法。")])]),s._v(" "),a("p",[s._v("另外，它还特有两种方法：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("arr.set(fromArr, [offset])")]),s._v(": 从 "),a("code",[s._v("offset")]),s._v("（默认为 "),a("code",[s._v("0")]),s._v("）开始，将 "),a("code",[s._v("fromArr")]),s._v(" 中的所有元素复制到 "),a("code",[s._v("arr")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("arr.subarray([begin, end])")]),s._v(": 创建一个从 "),a("code",[s._v("begin")]),s._v(" 到 "),a("code",[s._v("end")]),s._v("（不包括）相同类型的新视图。这类似于 "),a("code",[s._v("slice")]),s._v(" 方法（同样也支持），但不复制任何内容，只是创建一个新视图，以对给定片段的数据进行操作。")])]),s._v(" "),a("h2",{attrs:{id:"_2-dataview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-dataview"}},[s._v("#")]),s._v(" 2.DataView")]),s._v(" "),a("p",[s._v("相比于类型化数组 "),a("code",[s._v("TypedArray")]),s._v("，"),a("code",[s._v("DataView")]),s._v(" 的使用更加灵活。")]),s._v(" "),a("p",[s._v("对于类型化数组，构造器决定了其格式。整个数组应该是统一的。第 "),a("code",[s._v("i")]),s._v(" 个数字是 "),a("code",[s._v("arr[i]")]),s._v("。")]),s._v(" "),a("p",[s._v("而通过 "),a("code",[s._v("DataView")]),s._v("，我们可以使用 "),a("code",[s._v("getUint8(i)")]),s._v(" 或 "),a("code",[s._v("getUint16(i)")]),s._v(" 之类的方法访问数据。")]),s._v(" "),a("p",[s._v("我们在调用方法时选择格式，而不是在构造的时候。")]),s._v(" "),a("h3",{attrs:{id:"_2-1-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-语法"}},[s._v("#")]),s._v(" 2-1.语法")]),s._v(" "),a("p",[s._v("其语法只有一种：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DataView")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("byteOffset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("byteLength"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("buffer")]),s._v(" —— 底层的 "),a("code",[s._v("ArrayBuffer")]),s._v("。与类型化数组不同，"),a("code",[s._v("DataView")]),s._v(" 不会自行创建缓冲区（"),a("code",[s._v("buffer")]),s._v("）。我们需要事先准备好。")]),s._v(" "),a("li",[a("code",[s._v("byteOffset")]),s._v(" —— 视图的起始字节位置（默认为 "),a("code",[s._v("0")]),s._v("）。")]),s._v(" "),a("li",[a("code",[s._v("byteLength")]),s._v(" —— 视图的字节长度（默认至 "),a("code",[s._v("buffer")]),s._v(" 的末尾）。")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4 个字节的二进制数组，每个都是最大值 255")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" buffer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Uint8Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" dataView "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DataView")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("buffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在偏移量为 0 处获取 8 位数字")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" dataView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUint8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 255")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 现在在偏移量为 0 处获取 16 位数字，它由 2 个字节组成，一起解析为 65535")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" dataView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUint16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 65535（最大的 16 位无符号整数）")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在偏移量为 0 处获取 32 位数字")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("alert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" dataView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUint32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4294967295（最大的 32 位无符号整数）")]),s._v("\n\ndataView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUint32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将 4 个字节的数字设为 0，即将所有字节都设为 0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("当混合格式的数据存储在同一缓冲区（"),a("code",[s._v("buffer")]),s._v("）中时，"),a("code",[s._v("DataView")]),s._v(" 非常有用。")]),s._v(" "),a("p",[s._v("例如，当我们存储一个成对序列（"),a("code",[s._v("16")]),s._v(" 位整数，"),a("code",[s._v("32")]),s._v(" 位浮点数）时，用 "),a("code",[s._v("DataView")]),s._v(" 可以轻松访问它们。")])])}),[],!1,null,null,null);t.default=e.exports}}]);